<!-- id: NT-0182 | source: ProjectPlans\Combined_Master_PLAIN_Non_Tech_001.docx | range: 655200-659200 -->


ext.idv.webhook_received/decision • ext.bg.webhook_received/decision

ext.social.pull.start/finish (platform, rows) •
ext.content.scan.request/decision

ext.esign.envelope.send/status • ext.comms.send.success/fail

All entries include adapter_version, external_ref, lbg_id/booking_leg_id
when relevant.

P\) Acceptance Criteria (mark §5.10 FINAL)

Each external system has a documented adapter (sync API + webhook +
polling fallback), versioned and emitting §5.1 events.

External refs stored (charge/payout/tax/idv/bg/social/esign ids) and
visible in Gold lineage columns.

Reconciliation pipelines tie payments/payouts/tax to settlements;
variance alerts live (§5.8).

Security: keys in Vault, HMAC webhook checks, IP allowlists, leastscope
OAuth, audit logs.

SLAs & monitors per adapter; synthetic tests; failover behaviors
defined.

Content safety in place for public assets; quarantine path & admin
override logged.

Esignature hooks populate doc hashes and status; PDFs retained 7 years.

Social metrics nightly/refresh flows populate fact_social_snapshot with
verified flag & timestamps.

Lineage panel in Admin shows endtoend source→table for money and trust
decisions.

Q\) Why this works

Clear adapter boundaries prevent vendor sprawl from leaking into core
logic.

Endtoend lineage lets Finance, Ops, and T&S trust every number and
decision.

Strong security and PII minimization keep us compliant while still
useful.

SLAs + monitoring keep external outages from silently corrupting
analytics or UX.

Next up: §5.11 --- ML Feature Store & Modeling Hooks --- define feature
views (ranking, risk, Smart Invites), offline/online parity, training
data contracts, model versioning, bias checks, and how predictions
roundtrip into events & metrics.

§5.11 --- ML Feature Store & Modeling Hooks

Goal: Power ranking, recommendations, risk, and ops automation with
auditable, privacysafe ML. Ensure offline/online parity, clear feature
contracts, conservative guardrails (no paytowin, no FCRAsensitive
automation), and fast rollback. Models must measurably improve
Search→Inquiry→Booking without harming trust or fairness.

A\) Decisions we'll (carefully) augment with ML

Search Reranker (within organic slots only)\
Predict P(inquiry\|query,card) and P(booking\|inquiry,card); combine
with match score to rank organic results. Paid slots remain separately
capped (per §3.3).

Smart Invites (provider & buyer)\
Suggest matches to message/book now; optimize for booking probability
and schedule fit (availability & distance).

Promotions Quality Score\
For paid Boost ordering (within paid caps): predict expected CTR and
booking lift to weight bids (per §3.3 E).

Risk & Reliability Signals\
Early warnings on likely noshows, late cancels, chargeback risk,
invalidclick rings (anomaly models feed §4.14.13 runbooks).

Guardrail: Risk models flag for human or policy rules; they do not
autosanction.

Price & Package Hints (seller tools)\
Nonbinding suggestions: "Packages priced in the top 10% for your city
lead to 23% fewer inquiries." No autopricing.

Message Triage Hints\
Classify intent/urgency to surface threads that likely convert soon;
never autorespond.

B\) Offline/Online Architecture (Feature Store)

Offline (training)

Source: Gold facts & dims (§5.5) joined pointintime (between
valid_from/valid_to) to prevent leakage.

Stored as feature views (parquet) with featureset_version and entity
keys: service_profile_id, buyer_user_id, city_id, dt.

Online (inference)

Lowlatency feature cache (KV store) keyed by (service_profile_id,
city_id) and (buyer_user_id).

TTLs per group (e.g., availability 5 min; social metrics 24 h; rep score
1 h; reliability 24 h).

Backfill on miss: fall back to heuristics + minimal onthefly compute
(distance, schedule overlap).

Parity checks: nightly compare offline vs online distributions; drift
alarms (§5.8).

C\) Feature Groups (PIIsafe, unitized)

Provider / Service Profile (roleaware)

rep_score_role (0--100), id_verified (bool), trus