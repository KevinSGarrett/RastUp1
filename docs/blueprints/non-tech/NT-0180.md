<!-- id: NT-0180 | source: ProjectPlans\Combined_Master_PLAIN_Non_Tech_001.docx | range: 648000-652000 -->

itable, and LBGaware---and any dashboard number can be traced back to
its upstream source.

A\) Systems Map & Roles (USonly launch)

Money

Payment Processor (card + ACH + 3DS, disputes, payouts): e.g.,
Stripe/Adyenclass.

Tax Engine (sales tax determination): Avalara/TaxJarclass (US
servicestax, city addons).

Bank/KYC/KYB: via payment processor hosted flows.

Trust

ID Verification: Persona/Onfido/Veriffclass (18+ check, liveness).

Background Checks (FCRA): Checkr/Sterlingclass (USonly roles; optin).

Growth & Safety

Social Metrics: IG Graph, YouTube Data, TikTok, X; Phase2: LinkedIn
Pages, FB Pages, Snapchat Public Profile.

Content Safety Scan: VisionAPIclass (image/video nudity/explicit
heuristic).

ESignature: DocuSign/DropboxSignclass (SOW, Releases, House Rules).

Comms: Email (SendGridclass), SMS (Twilioclass), Push (FCM/APNs).

Storage/Deliverables

External links (Drive/Dropbox) + local uploads (thumbnails/proofs).

Each adapter emits/consumes versioned events per §5.1 and writes to
Bronze → Silver → Gold per §5.3--§5.5.

B\) Integration Pattern (Adapter Contract)

Adapter rules (all vendors)

One adapter = one bounded context, versioned (adapter_version), with:

Synchronous API calls (idempotent keys).

Webhook listener (verified signatures; replay protection).

Polling fallback (for missed webhooks).

Identifiers: store vendor ids as external_ref columns
(processor_charge_id, tax_txn_id, idv_verification_id, etc.).

Event mapping: every webhook → ext.\<domain\>.webhook_received, then
internal normalized events (e.g., fin.checkout_pay_success).

Retries: exponential backoff, max 24h. Idempotent by natural keys.

Security: OAuth/scoped API keys in Vault; peradapter RBAC; allowlist IPs
for webhooks; mTLS for admin callbacks.

Observability: latency, error rate, backlog gauges; synthetic tests (see
§4.14.13).

SLA tags: adapter_sla_tier (S1 money, S2 trust, S3 analytics).

C\) Payments & Payouts Adapter (S1)

Capabilities

Card auth/capture, 3DS challenge, ACH debit; refunds/partial refunds.

Disputes/chargebacks lifecycle; evidence uploads.

Payouts with reserves; bank verification (KYC/KYB).

Data flow

Checkout calls processor with lbg_id, amount, idempotency key → returns
processor_charge_id.

Webhook: charge.succeeded/failed, dispute.opened/closed,
payout.paid/failed.

Normalize to §5.1 events: fin.checkout_pay_success/fail,
fin.refund_apply, fin.payout\_\*.

Gold reconciliation: fact_payment, fact_payout (see §5.5), tie to
settlements in §5.3.

Edge cases

ACH returns (R01/R07\...): mapped to fin.checkout_pay_fail with code →
autocancel leg per policy.

Split payments (rare): still one charge_id per LBG; lineitems allocate
across legs.

Security

3DS indicators stored; PAN never touches our systems; tokens only.

D\) Tax Adapter (S1 for Finance, S2 for Ops)

When

At checkout (quote), at amendments (change orders), and on refunds.

Flow

Request: lbg_id, origin/destination (city/state), taxable base, role
(talent/studio).

Response: tax cents, jurisdiction codes, latency; store tax_txn_id.

Webhook/poll: provider status changes (rate updates/errors).

Tables

gold.fact_tax line per calc; joins to fact_payment.

Failover: if calc down ⇒ show buyer banner "tax delayed," proceed only
where legally safe (setting in §4.14.7).

E\) ID Verification Adapter (S2)

Flow

Hosted KYC: user launches flow → idv_verification_id → webhook status
(approved\|refused\|reupload).

Store flags (ID Verified true/false), selfie liveness score; no raw docs
in analytics.

Emits: ts.idv_submit, ts.idv_decision.

PII

Raw images/IDs in vendor; we store only tokens & status (see §5.7).

F\) Background Check Adapter (S2, FCRA)

Flow

Optin; collect consent; submit job with bg_check_id.

Webhook status: clear\|consider\|review_required.

Adverse action workflow in Admin (twostep notices).

Emits: ts.bg_submit, ts.bg_decision, ts.bg_adverse_action.

Compliance

Store report IDs & statuses, not report contents; retention 5--7 years
per §5.7.