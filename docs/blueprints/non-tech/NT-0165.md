<!-- id: NT-0165 | source: ProjectPlans\Combined_Master_PLAIN_Non_Tech_001.docx | range: 594000-598000 -->

builds and backfills.

Dim contracts (dim\_\*):

Surrogate key, natural key (e.g., service_profile_id), SCD2 columns,
current_flag, deleted_at (nullable).

H\) Materializations & Performance

Materialized views for hot tiles in §4.14.12 (e.g., marketplace KPIs,
ROAS, search CTR).

Incremental refresh cadence: hourly for ops, daily for finance.

Compaction jobs coalesce small files into 128--256 MB targets.

Query guards: perteam slots/quotas; kill long scans; hints to always use
partition filters.

Cost dashboards (per §5.12) track spend by schema/table and top queries.

I\) Catalog, Lineage & Quality Annotations

Data Catalog (gov.catalog): table owner, freshness SLA, privacy zone,
retention policy, business description, and metric keys used (links to
§4.14.12).

Lineage: each Gold table lists upstream Silver/Bronze sources; BI tiles
show lineage links.

Quality badges: Red/Amber/Green derived from DQ monitors (see §5.8);
tiles hide or show warnings accordingly.

J\) Developer & Analyst Interfaces

Analysts: query gold_restricted.\* through the semantic layer (metrics
catalog in §5.6); no adhoc joins to vault or Bronze.

Data Science: sample from Silver snapshots for model training; feature
store pulls from Gold (see §5.11).

Finance: read Gold finance snapshots (locked daily); recon exports
scheduled to Finance dashboard.

Legal/Tax: governed access to vault_pii.\* with export watermarking &
chainofcustody logs.

K\) Security, Keys & Audits

Encryption at rest with KMS; key rotation per policy.

Grant model: least privilege; role → schema/table permissions;
columnlevel masks where needed.

All downloads watermarked (user, timestamp, query hash); exports logged
in gov.export_log.

DLP scans nightly for forbidden patterns in nonvault schemas; alert if
found (block on repeat).

L\) Acceptance Criteria (mark §5.4 FINAL)

Schemas created: bronze, silver, gold, gold_restricted (masked views),
vault_pii, gov.

RBAC & masking policies enforced per zone; RLS optional by city; JIT
unmask with audit logs live.

Retention policies configured per layer; purge engine writes to
gov.retention_log; legal holds pause deletes.

Partitioning/clustering set per table family; compaction jobs scheduled;
performance quotas active.

Gold facts/dims conform to contracts (money in cents, LBG/leg keys,
source stamps); SCD2 dims in place.

Catalog metadata populated (owner, SLA, privacy, retention); lineage
links from Gold → Silver/Bronze.

DLP scans & export watermarking active; downloads audited; keys rotated.

Cost dashboards running; freshness SLAs (\<15 min ops; daily finance
close) visible in §4.14.12.

M\) Why this works

Fast for teams, safe for users: Gold is readytouse and masked; sensitive
data is quarantined to the vault with tight gates.

Auditable: Bronze stays immutable; lineage and contracts make every
number explainable.

Scalable & costaware: Partitioning, compaction, and materializations
keep queries snappy and bills predictable.

LBGaware: Facts carry group and leg keys, so talent and studio flows tie
together cleanly.

§5.5 --- Gold Schemas (Facts & Dimensions)

Goal: Define the businessready tables analysts, Finance, Ops, and
Product will use---clean keys, LBGaware rollups, money in cents, SCD2
dimensions, and predictable joins. All tables conform to §5.4 contracts
and IDs from §5.2.

A\) Modeling rules (apply to every Gold table)

Keys: Use opaque IDs from §5.2; every fact includes dt (UTC date),
city_id, and at least one of lbg_id or booking_leg_id.

Money: Integers in cents + currency=\'USD\'. Totals reconcile to §5.3
Gold finance close.

PII: No raw PII; joins to masked dims only (see gold_restricted).

Soft delete: is_deleted (bool) present where entities can be retired;
history preserved.

Timestamps: created_at, updated_at; facts add occurred_at/finalized_at
as needed.

SCD2 dims: valid_from, valid_to, current_flag.

B\) Dimensions (SCD2)

gold.dim_user

gold.dim_service_profile (rolespecific)

gold.dim_studio

gold.dim_city