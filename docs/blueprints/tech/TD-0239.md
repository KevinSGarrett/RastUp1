<!-- id: TD-0239 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 860400-864400 -->

cedures.

## **1.18.16 Acceptance criteria --- mark §1.18 FINAL only when ALL true**

3934. People/Studios/Work are indexed with Safe‑Mode fields and upsert
      within **≤ 5 minutes** of changes.
3935. Search supports **text + facets + geo + sort**, with **ANY/ALL**
      filters, cursor pagination, and suggestions; public queries never
      leak NSFW.
3936. Ranking blends relevance, proximity, verified, availability,
      quality, and freshness; personalization boosts and blocks work.
3937. Caching yields high hit rate on hot city×role queries; p95 latency
      meets targets.
3938. Synonyms/typos configured; "did‑you‑mean" operates; zero‑result
      rate tracked.
3939. Dashboards live; alarms for index backlog, zero‑results spikes,
      and latency.
3940. Cost profile within budget (single Typesense node for MVP, scale
      plan documented).

# **§1.19 --- Studios & Spaces (Listings, Availability, Booking Rules & Verification)**

**Full Technical Development Plan (copy‑paste block for your project
doc)**

**Purpose.** Model, publish, and book **places** (studios/spaces)
distinctly from **people** (service profiles), with their own fields,
pricing, buffers, rules, deposits, verification (**Studio Lite →
Verified Studio**), and policies. Integrates tightly with **Calendar
(§1.12)**, **Payments (§1.13)**, **Orders (§1.14)**, **Support
(§1.15)**, **Growth & SEO (§1.16--§1.17)**, and **Search (§1.18)**.
Cost‑conscious, Safe‑Mode compliant (SFW previews only on public), and
auditable.

## **1.19.1 Objectives & invariants**

3941. **People ≠ Places.** Studios are separate first‑class entities; no
      confusion in reviews, pricing, or policies.
3942. **Commercially complete.** Support hourly & day pricing, minimums,
      **buffers**, **overtime**, **cleaning**, **add‑ons**,
      **deposits**, and **insurance/permits** flags.
3943. **Verification first.** **Studio Lite** (documented address &
      control) → **Verified Studio** badge; gate **Instant Book** & city
      spotlight.
3944. **Safe & SFW.** Public pages render SFW images; PII & exact
      addresses gated until booking/approval when required.
3945. **Availability is truthful.** Templates & per‑date overrides; IB
      may require verification or host confirmation.
3946. **Atomic booking.** No partial double‑books; group holds convert
      or expire together.
3947. **Refund rules differ from people.** Studios follow their own
      **time‑band kernel** (see §1.15 & below).
3948. **Elastic cost.** Use serverless + Aurora + S3 + AppSync;
      geocoding via AWS Location; search via Typesense (§1.18).

## **1.19.2 Data model (Aurora, schema** ***studio*****) --- paste‑ready DDL**

Create *db/migrations/026_studios.sql*:

*begin;*\
\
*create schema if not exists studio;*\
\
*create type studio.verification_status as enum
(\'unverified\',\'lite_verified\',\'verified\');*\
*create type studio.publish_status as enum
(\'draft\',\'review\',\'published\',\'suspended\');*\
*create type studio.price_unit as enum (\'hour\',\'day\');*\
*create type studio.rule_kind as enum
(\'noise\',\'footwear\',\'food_drink\',\'smoking\',\'animals\',\'capacity\',\'other\');*\
*create type studio.addon_charge_kind as enum
(\'flat\',\'per_hour\',\'per_person\');*\
*create type studio.deposit_kind as enum
(\'authorization_hold\',\'charge_refundable\',\'nonrefundable_fee\');*\
\
*\-- Core studio listing (place)*\
*create table studio.listing (*\
*studio_id text primary key, \-- std\_\...*\
*owner_user_id text not null, \-- usr\_\...*\
*handle text not null unique, \-- public slug*\
*name text not null,*\
*headline text,*\
*description_md text not null,*\
*publish_status studio.publish_status not null default \'draft\',*\
*verification studio.verification_status not null default
\'unverified\',*\
*instant_book boolean not null default false,*\
*city text not null,*\
*country text not null,*\
*neighborhood text,*\
*address_hash text, \-- hashed; full address stored in secure table*\
*lat double 