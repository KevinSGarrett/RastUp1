<!-- id: TD-0016 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 57600-61600 -->

nts created once (idempotency).

## **1.3.S Acceptance Criteria (Part 2)**

We will mark **§1.3 (Part 2) COMPLETE** only when **all** are true:

- Change orders & overtime create amendment lines, collect payments
  properly, and re‑quote tax.
- Cancellation engine returns accurate band outcomes and executes
  refunds; partial LBG cancellation handled with clear UX and math.
- Acceptance window logic gates payouts correctly; auto‑accept on
  deadline.
- Deposit claim flow (auth → claim → capture/void) functions with audits
  and caps.
- Receipts (leg + group) render deterministically with tax and doc
  hashes.
- Webhook mappings produce normalized events idempotently.
- Part‑2 test suite green in CI and under sandbox smoke.
- No unexpected cost spikes (incremental captures vs new PIs measured;
  renderer concurrency capped).

# **§1.3 --- Booking & Checkout**

**Part 3/3: Payouts & Reserves · Disputes & Evidence · Daily Close &
Recon · Admin Consoles · Full E2E Test Matrix & SLOs**

This completes §1.3. We won't move forward to §1.4 until you're
satisfied this sub-section is covered to your 99.9% bar.

## **1.3.T Payouts, Reserves, Instant Payouts (timing & failure modes)**

### **T.1 Principles**

- **Funds capture** happens at LBG confirmation (cards/ACH).
- **Payouts** are **per-leg** (Talent leg, Studio leg) and are queued
  only on **completion** (buyer accept) or **auto-accept** (acceptance
  window end).
- **Reserves** (platform risk) can delay or reduce the first or risky
  payouts.
- **Instant payouts** are optional and fee-bearing, subject to risk
  controls.

### **T.2 Data & states**

- *payout* table (per leg) holds: status
  (*queued\|in_transit\|paid\|failed\|canceled\|paused*), amount,
  scheduled time, and external payout id.
- Reserve policy table (or config): per-seller reserve %, minimum
  balance, and release cadence.

### **T.3 Computation of payout amounts**

Per **leg** on completion/accept:

*seller_gross = leg.total_cents -- platform_fees_cents -- refunds_cents
-- chargeback_reserve_hold_centsseller_net = max(0, seller_gross)*

- If seller has **reserve%** (e.g., 10%), we split:

  - transfer_now = floor(seller_net \* (1 - reserve%))
  - reserve_hold = seller_net - transfer_now

- Track reserves by seller with line-item provenance (which legs
  contributed).

### **T.4 Scheduler & execution**

- A **Payout Scheduler** runs on event or short cron:

  - For each eligible leg → compute amounts, **create Stripe transfer**
    to the seller's Connect account with idempotency key tied to
    *(leg_id, payout_seq)*.
  - On success → status *in_transit* then *paid* (via webhook).
  - On failure → *failed*; retry with back-off and display admin action
    items.

### **T.5 Instant payouts (optional)**

- If enabled for a seller and platform policy allows:

  - Expose "Instant Payout" in Seller → transfers *transfer_now*
    immediately (Stripe instant) minus **instant fee**.
  - Blocked when: recent disputes, excessive refunds, negative balance,
    or flagged risk.
  - All instant payouts audited.

### **T.6 Failure modes & handling**

- **ACH settlement uncertainty**: For recent ACH payments, payouts
  **wait** until settlement confidence time or policy window.
- **Negative net** (post-refund/dispute loss): mark seller balance
  negative; future payouts net it out; Admin can arrange manual debit if
  required.
- **Webhook gaps**: if we miss a payout webhook, a reconciliation job
  fetches payout objects and backfills states idempotently.

### **T.7 Telemetry**

- *payout.queued\|in_transit\|paid\|failed\|canceled\|paused*,
  *reserve.hold\|release*, *payout.instant.request\|approved\|denied*.

## **1.3.U Disputes (chargebacks) & Evidence Kits**

### **U.1 Sources of evidence**

- **Doc packs** (SOW, releases, studio rules) with immutable PDF hashes.
- **Thread transcript** (messages + action cards timestamps).
- **Deliverable manifest** (checksums, names, upload times).
- **Check-in/out** time evidence (sessi