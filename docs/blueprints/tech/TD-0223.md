<!-- id: TD-0223 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 802800-806800 -->

**Docs
(§1.26)**, **Trust & Safety (§1.5)**, **Notifications (§1.10)**, and
**Calendar (§1.12)**. Cost-conscious (serverless + SES), privacy-safe,
and SLA-driven.

## **1.15.1 Objectives & invariants**

3652. **Single front door** ("Support Center" & widget) → deflect common
      issues, then open **typed cases**.
3653. **Evidence-first**: stitch messages, deliverables, docs, payments,
      and calendar into a case **timeline**; never decide without
      evidence.
3654. **Deterministic refunds**: apply policy kernels (time bands &
      milestones) automatically; overrides require **two-person
      approval**.
3655. **Chargebacks ≠ refunds**: separate state machine, strict evidence
      pack, and ledger-accurate handling.
3656. **Payout safety**: holds or reserves where severity/risk warrants.
3657. **Immutable audit**: every admin action is logged and mirrored to
      S3 WORM (Object Lock).
3658. **Privacy**: case-bound, time-boxed admin access; secure S3 links;
      redaction tools.

## **1.15.2 Case taxonomy**

- **Booking** (people/studios): pre-event (reschedule request; venue
  conflict), during (no-show; unsafe), post (quality; late delivery;
  damages).
- **Payments & payouts**: charge failure, duplicate charge, refund
  status, instant payout delays.
- **Account & product**: login; notifications; verification; profile
  issues.
- **DMCA/IP**: takedowns; counter-notices.
- **Policy violation / Safety**: harassment; doxxing; NSFW public leak;
  off-platform payment attempts.
- **Chargeback**: card network disputes.

Each case type binds to a **case flow** with specific fields, allowed
transitions, and resolution outcomes.

## **1.15.3 Data model (Aurora Postgres) --- paste-ready DDL**

Create *db/migrations/023_support_center.sql*:

*begin;*\
\
*create schema if not exists sup;*\
\
*\-- Cases*\
*create type sup.case_kind as enum
(\'booking\',\'payment\',\'product\',\'dmca\',\'policy\',\'chargeback\');*\
*create type sup.case_status as enum
(\'new\',\'triage\',\'investigating\',\'awaiting_user\',\'decision_pending\',\'resolved\',\'closed\');*\
\
*create table sup.case (*\
*case_id text primary key, \-- sca\_\...*\
*kind sup.case_kind not null,*\
*status sup.case_status not null default \'new\',*\
*priority int not null default 3, \-- 1..5*\
*opened_by text not null, \-- usr\_\... or system*\
*owner_admin text, \-- admin id*\
*subject_user text, \-- user primarily involved*\
*order_id text, \-- ord\_\...*\
*thread_id text, \-- thr\_\...*\
*studio_id text, \-- std\_\...*\
*summary text not null,*\
*sla_first_at timestamptz, \-- first response due*\
*sla_due_at timestamptz, \-- resolution due*\
*created_at timestamptz default now(),*\
*updated_at timestamptz default now()*\
*);*\
\
*\-- Case messages & timeline*\
*create table sup.case_event (*\
*event_id text primary key, \-- sev\_\...*\
*case_id text not null references sup.case(case_id) on delete cascade,*\
*actor_kind text not null check (actor_kind in
(\'user\',\'admin\',\'system\')),*\
*actor_id text, \-- usr\_\... or admin id*\
*type text not null, \--
\'note\',\'status\',\'evidence\',\'refund\',\'hold\',\'chargeback\',\'dmca\'*\
*payload jsonb not null default \'{}\',*\
*created_at timestamptz default now()*\
*);*\
\
*\-- Refund proposals/decisions*\
*create type sup.refund_status as enum
(\'proposed\',\'processing\',\'succeeded\',\'failed\');*\
*create table sup.refund (*\
*refund_id text primary key, \-- srf\_\...*\
*case_id text not null references sup.case(case_id) on delete cascade,*\
*order_id text not null, \-- ord\_\...*\
*amount_cents int not null,*\
*reason text not null, \-- normalized code*\
*status sup.refund_status not null default \'proposed\',*\
*processor_ref text, \-- stripe re\_\...*\
*created_by text not null, \-- admin id*\
*created_at timestamptz default now(),*\
*updated_at timestamptz default now()*\
*);*\
\
*\-- Payout holds*\
*create type sup.hold_status as enum
(\'applied\',\'released\',\'expired\');*\
*create table sup.payout_hold 