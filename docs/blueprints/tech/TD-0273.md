<!-- id: TD-0273 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 982800-986800 -->

r
  tables, scopes enforcement, token cache.
- **Agent B --- REST Endpoints**: */profiles*, */studios*, */work*,
  */briefs*, */invites*, */orders/{id}*, */payouts*.
- **Agent C --- Webhooks**: endpoint CRUD, HMAC signing, retry & DLQ,
  replayer UI.
- **Agent D --- DX**: OpenAPI, docs site, SDK stubs, examples, status
  page, Stage sandbox.

## **1.27.13 Tests (representative)**

4684. **AuthZ**: scope enforcement; least‑privilege; cross‑client
      isolation.
4685. **Safe‑Mode**: public inventory never returns NSFW assets; SFW
      thumbnails only.
4686. **PII**: emails/phones absent unless elevated scope; logs show
      redacted payloads.
4687. **Idempotency**: repeated *POST* with same key produces one
      result.
4688. **Rate limits**: exceeding quotas yields 429; *Retry‑After*
      respected.
4689. **Webhooks**: signature verification passes; replay detection;
      backoff after failures; replayer produces identical payloads.
4690. **Versioning**: v1/v2 route isolation; deprecation headers appear
      after toggles.

## **1.27.14 Artifacts (paste‑ready)**

- *db/migrations/034_partner_api.sql* --- partner registry & webhook
  deliveries.
- *api/openapi.yaml* --- REST contract.
- *api/webhooks/signing.md* --- HMAC verification guides.
- *services/webhooks/\** --- delivery/ retry/ DLQ/ replayer.
- *services/rest/\** --- Lambda handlers per resource.
- *docs/developers/\** --- guides, auth, scopes, examples.
- *sdk/ts/\**, *sdk/python/\** --- minimal clients.
- *observability/dashboards/partners.md* --- metrics & alerts.

## **1.27.15 Acceptance criteria --- mark §1.27 FINAL only when ALL true**

4699. OAuth 2.0 flows work; scopes enforced; token introspection/cache
      live.
4700. Public inventory endpoints respond with SFW content, cursor
      pagination, and edge caching.
4701. Briefs & invites can be created via API under correct scopes;
      buyer credits decrement where applicable.
4702. Webhooks deliver with signed payloads, retries, and replayer;
      partners can verify and replay.
4703. PII remains protected; elevated scopes audited; responses redacted
      by default.
4704. Observability dashboards & alerts are active; rate limits/quota
      enforcement tested.
4705. Docs site live; SDK stubs published; Stage sandbox usable
      end‑to‑end.

### **Gate decision for §1.27 (your rule)**

I re‑audited §1.27 against your non‑technical plan's partner/integration
expectations (webhooks, OAuth, safe public inventory, briefs/invites,
payouts reconciliation, privacy). With **REST surface, OAuth/scopes,
webhooks, data model, privacy, caching, DX, tests, artifacts, and
acceptance** specified, **§1.27 meets the ≥99.9% bar** and is
implementation‑ready.

# **§1.28 --- User Data Export & Portability (Self‑Serve Exports, Receipts & Privacy Packs)**

**Full Technical Development Plan (single copy‑paste block for your
master doc)**

**Purpose.** Provide users with a **complete, machine‑readable export**
of their data (GDPR Art. 20 "portability") plus a **human‑readable
summary** and **official receipts/invoices**. Use the same pipeline to
fulfill **DSAR** exports (see §1.24), keep costs low (serverless),
preserve **Safe‑Mode** and PII minimization, and ensure strong identity
verification before release. Integrates with **AppSync**, **Aurora**,
**S3**, **Stripe**, **Messaging/Orders/Support** (§§1.4, 1.13--1.15),
**Search/Analytics** (§§1.18, 1.21), and **Admin Console** (§1.22).

## **1.28.1 Objectives & invariants**

4706. **Privacy‑first**: export only the requester's data (and legally
      permitted conversation content), redact counterpart PII where
      required, never include secrets.

4707. **Two artifacts** per export:

      p.  **Portability bundle**: **JSON + CSV** (UTF‑8), zipped with a
          **manifest** (SHA‑256 checksums).
      q.  **Human pack**: PDF "Your RastUp data" summary + individual
          **PDF receipts/invoices** for orders.

4708. **Strong verification**: re‑auth + MFA (if enabl