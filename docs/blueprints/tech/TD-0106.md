<!-- id: TD-0106 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 381600-385600 -->

G)

Copy these directly into your Word doc under an "Artifacts" subheading.

## **1.17.P Acceptance criteria --- mark §1.17 FINAL only when ALL true**

1833. Canonical URL policy implemented; UTM/ref routes 301 correctly.
1834. JSON‑LD present on People, Packages, Studios, and Stories with SFW
      images only.
1835. robots/noindex enforced for drafts, gated/NSFW, filters, admin,
      and checkout routes.
1836. Segmented sitemaps generate & auto‑submit; include only indexable
      pages; refresh cadence set.
1837. Hreflang in place when we enable additional locales; default *en*
      with *x-default*.
1838. ISR/SSR caching + CloudFront policies deliver p75 **LCP ≤ 2.5s**,
      **CLS ≤ 0.10**, **INP ≤ 200ms** on top routes.
1839. a11y checks pass (axe/Pa11y) on public routes; alt text coverage ≥
      99%.
1840. Dashboards show CWV trends, crawl health, and the SEO funnel;
      alerts configured for regressions.
1841. Costs stay within budgets (no third‑party bloat; edge cache hit
      ratio ≥ 90%).

# **§1.17 --- SEO & On‑Site Optimization Deep‑Dive (Expanded)**

## **1.17.1 Crawl & Indexation Control (robots, meta, headers)**

**Goals:** Maximize crawl efficiency on **indexable SFW pages**, prevent
indexing of **gated/duplicate/thin** pages, and make crawler behavior
cheap.

**Policies**

- **Indexable:** Home, City & Role hubs, Search (unfiltered landing
  variants only), Service Profiles (non‑adult), Studios, Case
  Studies/Guides, Legal/Help.
- **Noindex:** age‑gated or login‑required pages; any URL with tracking
  params; filter‑heavy result pages; drafts/preview;
  checkout/messages/admin; duplicate "print/share" variants.
- **Disallow (robots.txt):** */admin/*, */messages/*, */checkout/*,
  internal asset routes, *\_next/*.

**Artifacts**

**A) robots.txt (inline)**\
*Recommended path:* *web/public/robots.txt*

*User-agent: \**\
*Disallow: /admin/*\
*Disallow: /messages/*\
*Disallow: /checkout/*\
*Disallow: /\_next/*\
*Disallow: /\*?\* \# parameters not for indexing*\
*Allow: /\$*\
*Allow: /city/*\
*Allow: /studios*\
*Allow: /studio/*\
*Allow: /models*\
*Allow: /photographers*\
*Allow: /videographers*\
*Allow: /creators*\
*Sitemap:*
[*https://rastup.com/sitemap.xml*](https://rastup.com/sitemap.xml)

**B) X‑Robots‑Tag header policy (server)**\
*Recommended path:* *web/lib/robots.ts* (pseudocode)

*export function robotsHeaderFor(req, page) {*\
*if (page.isAdult \|\| page.requiresLogin \|\| page.isPreview) return
\"noindex, nofollow, noarchive\";*\
*if (req.url.includes(\"?\")) return \"noindex, follow\"; //
filter/param variants are non-canonical*\
*return \"index, follow\";*\
*}*\

**C)** ***\<meta name=\"robots\"\>*** **fallback (HTML)**\
Add a server‑generated *\<meta name=\"robots\" content=\"\...\"\>*
mirroring the header on all public templates.

## **1.17.2 Canonicalization & URL Normalization**

**Rules**

- **Single canonical per entity** (profile */p/{handle}*, studio
  */s/{slug}*, package */p/{handle}/packages/{slug}*).
- Strip ***utm\_\******,** ***ref*****, session and cache‑busting**
  params via 301 to canonical.
- Normalize: lowercase paths, **no trailing slash** (choose one; below
  assumes none), collapse multiple slashes, decode percent‑encoding.
- City context for hubs: canonical as **query param**
  (*/models?city=houston*), not path segments---prevents duplicate city
  pages.

**Artifacts**

**A) Canonical redirect middleware (Next/Edge pseudocode)**\
*Recommended path:* *web/middleware.ts*

*const CANON_QP_BLOCKLIST =
\[\"utm_source\",\"utm_medium\",\"utm_campaign\",\"utm_term\",\"utm_content\",\"ref\",\"gclid\",\"fbclid\"\];*\
*export function middleware(req) {*\
*const url = new URL(req.nextUrl);*\
*// Normalize case and trailing slash*\
*url.pathname =
url.pathname.toLowerCase().replace(/\\/+\$/,\'\').replace(/\\/{2,}/g,\'/\');*\
*// Strip tracking params*\
*for (const p of CANON_QP_BLOCKLIST) url.searchParams.delete(p);*\
*// If changed, 301 to canonical*\
*if (url.toString() !== req.ne