<!-- id: TD-0343 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 1234800-1238800 -->

ient), tiered quotas, and
      returns **standard headers**.
5796. Rate‑limit headers & consistent **429** error shape implemented
      across REST and GraphQL.
5797. Dashboards + alerts live; CI has unit + E2E tests for throttling;
      load test shows stable Dynamo throughput.
5798. Exceptions (staff, webhooks) and tiering documented and honored

# **Appendix S --- Test Data (Seeders, Masking & Non‑Prod Safety) --- deep version**

**Purpose.** Provide **repeatable, safe, realistic** data for local dev,
CI, Stage, and Demo---without ever leaking real PII or causing live
side‑effects (emails, charges). Ships with **seed scripts**, **Postgres
masking SQL**, **S3 media fixture generator**, **Typesense reindex**,
**runbooks**, and **acceptance gates**. Aligned with Appendix **O**
(Data Governance), **U** (Abuse & Safety), **N** (DR), **AC** (FinOps),
and §1.24 (Security/Privacy).

**Stack context.** Aurora Postgres (core OLTP), DynamoDB (rate/abuse),
S3 (media originals + SFW variants), Typesense (search), AppSync
(GraphQL), Stripe (test mode), CloudFront.

## **S.0 Environments & volumes**

  ----------- ----------------------------- --------------------------------------------------------------------------- -----------------------------
  **Env**     **Purpose**                   **Volume**                                                                  **Reset cadence**
  **Dev**     Local developer machines      \~200 users, 80 profiles, 20 studios, 300 media, 400 reviews, 50 messages   Developer‑run (*make seed*)
  **CI**      Unit/contract/E2E pipelines   Minimal: 10 users, 15 profiles, 30 media                                    On every job
  **Stage**   Pre‑prod testing              **Masked** prod clone + synthetic top‑ups                                   Nightly
  **Demo**    Sales/demo tenant             1k users, 400 profiles, curated media & reviews                             Weekly refresh
  ----------- ----------------------------- --------------------------------------------------------------------------- -----------------------------

## **S.1 Non‑prod data hard rules**

5799. **Never** copy raw production PII into non‑prod. Stage uses
      **masked clones** only.
5800. All external side‑effects disabled **by configuration**
      (*SANDBOX_MODE=1*, email/Stripe/webhooks in test).
5801. Seeds are **deterministic** (fixed RNG seed) to keep test
      snapshots stable.
5802. Media in non‑prod is **synthetic** (auto‑generated images), not
      real user content.
5803. All IDs that could cross environments are **namespaced** (e.g.,
      *demo\_*, *stage\_*).
5804. Seeder runs are **idempotent** (upsert on deterministic IDs) so
      they can be safely re‑run.

## **S.2 Repo layout (add these paths)**

*/seeds/*\
*README.md*\
*config.yml \# volumes & toggles per env*\
*seed.ts \# orchestrator*\
*sql/ \# baseline SQL (DDL inserts for lookup tables)*\
*fixtures/ \# curated JSON for demo personas*\
*/media-fixtures/*\
*gen_images.ts \# Node image generator → S3*\
*manifest.json \# keys & metadata used by seeders*\
*/typesense/*\
*reindex_seed.ts \# index seeded/curated docs*\
*/masking/*\
*stage_masking.sql \# field-level masking for Stage clone*\
*stage_clone.sh \# safe clone → mask → cutover*\
*/ops/runbooks/*\
*RB-S-01_seed_dev.md*\
*RB-S-02_seed_ci.md*\
*RB-S-03_stage_masked_clone.md*\

## **S.3 Seed configuration (*****/seeds/config.yml*****)**

*version: 1*\
*envs:*\
*dev:*\
*users: 200*\
*providers: 80*\
*studios: 20*\
*media_per_profile: 4*\
*reviews_per_profile: 5*\
*messages_threads: 25*\
*rng_seed: 1337*\
*s3_bucket_sfw: \"rastup-dev-sfw\"*\
*ci:*\
*users: 10*\
*providers: 8*\
*studios: 4*\
*media_per_profile: 2*\
*reviews_per_profile: 2*\
*messages_threads: 4*\
*rng_seed: 42*\
*s3_bucket_sfw: \"rastup-ci-sfw\"*\
*demo:*\
*users: 1000*\
*providers: 400*\
*studios: 120*\
*media_per_profile: 6*\
*reviews_per_profile: 8*\
*messages_threads: 80*\
*rng_seed: 777*\
*s3_bucket_sfw: \"rastup-demo-sfw\"*\

##