<!-- id: TD-0154 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 554400-558400 -->

minCase {*\
*caseId: ID!, kind: CaseKind!, status: CaseStatus!, priority: Int!,*\
*subjectUser: ID, orderId: ID, threadId: ID, listingId: ID,*\
*summary: String!, slaDueAt: AWSDateTime, timeline: \[AdminAction!\]!*\
*}*\
*type AdminAction { actionId: ID!, actorAdmin: ID!, action: String!,
payload: AWSJSON, createdAt: AWSDateTime! }*\
\
*type Query {*\
*adminSearchUsers(q: String!, limit: Int = 25): \[AWSJSON!\]!
\@auth(role: \"support\")*\
*adminGetCase(caseId: ID!): AdminCase! \@auth(role: \"trust_safety\")*\
*adminListCases(kind: CaseKind, status: CaseStatus, page: Int = 1):
\[AdminCase!\]! \@auth(role: \"trust_safety\")*\
*adminRecon(orderId: ID!): AWSJSON! \@auth(role: \"finance_ops\")*\
*}*\
\
*type Mutation {*\
*adminCreateCase(kind: CaseKind!, summary: String!, subjectUser: ID,
orderId: ID, threadId: ID, listingId: ID): ID! \@auth(role:
\"trust_safety\")*\
*adminAddAction(caseId: ID!, action: String!, payload: AWSJSON):
Boolean! \@auth(role: \"trust_safety\")*\
*adminSuspendUser(userId: ID!, reason: String!): Boolean! \@auth(role:
\"trust_safety\")*\
*adminReinstateUser(userId: ID!): Boolean! \@auth(role:
\"trust_safety\")*\
*adminRefund(orderId: ID!, amountCents: Int!, reason: String!): Boolean!
\@auth(role: \"finance_ops\")*\
*adminHoldPayout(orderId: ID!, reason: String!): Boolean! \@auth(role:
\"finance_ops\")*\
*adminReleasePayout(orderId: ID!): Boolean! \@auth(role:
\"finance_ops\")*\
*adminSearchPin(scope: String!, city: String!, query: String, pinIds:
\[ID!\]!, ttlHours: Int): Boolean! \@auth(role: \"search_curator\")*\
*adminSynonymUpsert(id: String!, words: \[String!\]!): Boolean!
\@auth(role: \"search_curator\")*\
*adminTemplatePublish(templateId: String!, version: String!, locale:
String!): Boolean! \@auth(role: \"docs_admin\")*\
*adminFlagSet(key: String!, value: AWSJSON!): Boolean! \@auth(role:
\"engineering\")*\
*}*\

## **1.28.7 JIT access & privacy guardrails**

- Case‑bound scopes grant temporary read (and limited reply where policy
  allows) to specific threads/media.
- Sensitive artifacts (IDs, invoices, door codes) are served only by
  short‑TTL, single‑use signed URLs; downloads counted and audited.
- All access writes an *admin_audit* record with case id, IP, UA, and
  reason.

## **1.28.8 Observability & SLAs**

- **Events:** *admin.login*, *admin.case.create\|act\|close*,
  *admin.user.suspend\|reinstate*, *admin.refund\|hold\|release*,
  *admin.search.pin*, *admin.synonym.upsert*, *admin.template.publish*,
  *admin.flag.set*, *admin.audit.view*.

- **Dashboards:** case backlog/aging, time‑to‑first‑response,
  time‑to‑resolution, dispute outcomes, refund rate, moderator workload,
  finance queue length, pin performance.

- SLOs:

  - Report triage p95 ≤ **4h** (business hours)
  - Dispute resolution p95 ≤ **5 days**
  - Finance webhook→action p95 ≤ **15m**
  - Audit write availability **99.99%**

## **1.28.9 CMS & SEO ops (public content)**

- Markdown editor with preview; scheduled publish/unpublish; locale
  keys; image handling (alt text required); SEO pre‑render.
- Safe‑Mode enforced on public surfaces; no NSFW in help/announcements.

## **1.28.10 Rate‑limit & risk tuning**

- Token buckets for message starts/hour, signup/IP/day; 3DS enforcement
  threshold sliders.
- High‑impact changes require **two‑person approval**; changes are
  audited with before/after values.

## **1.28.11 Feature flags & configuration**

- Flags stored in DynamoDB with typed schema; read‑only, signed JSON
  snapshot exposed via CDN to clients for fast boot.
- Secrets stored in AWS Secrets Manager; no keys in code.

## **1.28.12 CI/CD & access controls**

- Admin app deployed to a dedicated Amplify/CloudFront stack; WAF and IP
  allowlist required.
- SSO enforced for all routes; break‑glass elevation requires ticket id;
  logs routed to centralized logging with retention.

## **1.28.13 Test plan**

2557. **RBAC matrix** enforced; step‑up auth for finance/disputes.
2558. **Cases**: create/triage/resolve; SLA timers an