<!-- id: TD-0149 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 536400-540400 -->

ish JSON‑LD for **Person**
      (People profiles), **Place** (Studios), and **BreadcrumbList** on
      directories; never include exact addresses on public Studio pages
      (privacy).
2449. **Crawl budget control.** We pre‑render and surface only
      "thin‑spine" pages (Cities × Roles/Genres), not combinatorial
      facets.
2450. **Performance first.** Core Web Vitals (CWV) budgets are enforced
      at build and runtime (LCP, INP, CLS).

## **1.27.2 URL design & routing**

**Pages (examples):**

- City directory: */tx/houston/models* (*/state/city/role*)
- Genre slice: */tx/houston/models/editorial*
- Studio directory: */tx/houston/studios*
- Profile: */p/{handle}* (SFW profile)
- Studio: */s/{slug}* (SFW listing; exact address hidden)
- Content hubs / guides (optional):
  */guides/houston-photography-studios*

**Canonical param whitelist:** *?page=*, *?sort=* limited to
*best\|new\|price_low\|price_high\|distance* when an origin exists. All
other params are dropped in canonicals. Deep facet queries (ANY/ALL
filters) **do not** get indexable canonicals.

## **1.27.3 Canonical, robots, and meta tags**

**Recommended path:** *web/lib/seo/canonical.ts*

*export function canonicalFor(url: URL) {*\
*const allowed = new Set(\[\'page\',\'sort\'\]);*\
*const kept = \[\...url.searchParams.entries()\].filter((\[k\]) =\>
allowed.has(k));*\
*const params = new URLSearchParams(kept);*\
*url.search = params.toString();*\
*return url.toString();*\
*}*\

**robots meta logic:**

- Public directories, SFW profiles/studios: *\<meta name=\"robots\"
  content=\"index,follow\"\>*
- Any page where Safe‑Mode OFF or NSFW band \>= 2 would appear: *\<meta
  name=\"robots\" content=\"noindex,nofollow\"\>*
- Paid content pages (Fan‑Sub): always *noindex,nofollow*.

**Recommended path:** *web/pages/\_app.tsx* (excerpt)

*const robots = isIndexable(routeCtx) ? \"index,follow\" :
\"noindex,nofollow\";*\
*\<head\>\<meta name=\"robots\" content={robots} /\>\</head\>*\

## **1.27.4 robots.txt and crawl allowances**

**Recommended path:** *web/public/robots.txt*

*User-agent: \**\
*Disallow: /api/*\
*Disallow: /checkout/*\
*Disallow: /messages*\
*Disallow: /fan/*\
*Disallow: /\*?\*safeMode=false*\
*Disallow: /\*?\*any=\**\
*Disallow: /\*?\*all=\**\
*Allow: /tx/*\
*Sitemap:*
[*https://rastup.com/sitemap.xml*](https://rastup.com/sitemap.xml)

We explicitly disallow combinatorial filters and Safe‑Mode‑off queries.

## **1.27.5 Sitemap strategy (index + modular feeds)**

- **Sitemap index**: */sitemap.xml* → links to:

  - */sitemaps/cities.xml* (city directories)
  - */sitemaps/people-{A..Z}.xml* (profiles by initial)
  - /sitemaps/studios-{A..Z}.xml
  - */sitemaps/guides.xml* (content hubs)

**Generation:** nightly job (Lambda) using Aurora queries and Typesense
to fetch only **indexable** (SFW & published) slugs.\
**Changefreq/priority:** profiles/studios *weekly*, directories *daily*
while active.

**Recommended path:** *web/pages/sitemap.xml.ts*

*export async function GET() {*\
*const xml = await buildSitemapIndex();*\
*return new Response(xml, { headers:
{\'Content-Type\':\'application/xml\'}});*\
*}*\

## **1.27.6 Structured data (JSON‑LD)**

### **A) Person (SFW profile)**

**Recommended path:** *web/seo/jsonld-person.tsx*

*export function PersonJsonLd({ p }) {*\
*const data = {*\
*\"*[*\@context\":\"https://schema.org*]()*\",*\
*\"@type\":\"Person\",*\
*\"name\": p.displayName,*\
*\"jobTitle\": p.primaryRole, // \"Model\" \| \"Photographer\" \...*\
*\"knowsAbout\": p.genres.slice(0,8),*\
*\"image\": p.sfwAvatarUrl, // SFW only*\
*\"url\": \`https://rastup.com/p/\${p.handle}\`,*\
*\"address\": { \"@type\":\"PostalAddress\", \"addressLocality\":
p.city, \"addressRegion\": p.region, \"addressCountry\": p.country }*\
*};*\
*return \<script type=\"application/ld+json\"
dangerouslySetInnerHTML={{\_\_html: JSON.stringify(data)}} /\>;*\
*}*\

### **B) Place (Studio listing, approximate coordinates only)**

**Recommended path:** *web/seo/jsonld-place.tsx*\