<!-- id: TD-0299 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 1076400-1080400 -->

AC & immutable **WORM** audit; macros for
  refunds/DMCA. \| §1.22 \| *admin_rbac.spec.ts*, audit chain tests \|
  **Met** \| Dual control for sensitive changes.
- **R‑PRV‑120** \| DSAR exports & **portability** bundle with redaction
  & receipts. \| §1.28 \| *export_redaction.spec.ts*,
  *receipt_pdf.spec.ts* \| **Met** \| 7‑day auto‑expiry.
- **R‑API‑130** \| Partner **REST + Webhooks** with OAuth scopes & HMAC.
  \| §1.27; J (errors, idempotency) \| *webhook_signature.spec.ts* \|
  **Met** \| Replayer & DLQ present.
- **R‑LCH‑140** \| **Go‑live** with canary, rollback, war room. \| §1.29
  \| *rollback_rehearsal.md* evidence \| **Met** \| Cutover within
  window; SLOs green.
- **R‑OPS‑150** \| Post‑launch SRE handover, SLO/error budgets, a11y
  matrix. \| §1.30; A5 (a11y) \| *slo_budgets.json*, a11y runs \|
  **Met** \| Error budgets govern change.

**P.4 "How to finish to 100%"**

- Walk each non‑technical section and append a granular **ReqID** to
  every requirement sentence, then fill the rows exactly like the seeds
  above. Store as *docs/rtm/RTM_v1.csv*.
- We can continue adding rows here whenever you paste requirement lines;
  or I can generate more seed rows on request.

**P.5 Acceptance**

- Every requirement has at least one **Tech ref** and one **Test ref**;
  no "Pending" statuses remain; gaps become tracked issues.

## **Appendix Q --- API Versioning & Deprecation Lifecycle**

**Purpose.** Ensure stable partner integrations and safe evolution of
public APIs.

**Q.1 Version scheme**

- **MAJOR.MINOR.PATCH** (e.g., *v1.2.4*).
- **MAJOR** adds/removes fields or semantics; **MINOR** adds
  backward‑compatible fields; **PATCH** fixes bugs or docs.

**Q.2 Version negotiation**

- GraphQL: version via **schema tag** and **X‑API‑Version** header,
  defaulting to current MAJOR.
- REST/Webhooks: */v{MAJOR}/...* base path + *X‑API‑Version:
  {MAJOR.MINOR}*.

**Q.3 Backward compatibility rules**

- No breaking changes within a MAJOR line.
- New required fields must ship behind feature flags or with defaults.

**Q.4 Deprecation protocol**

- Mark fields with *\@deprecated(reason: \"\...\", sunset:
  \"YYYY‑MM‑DD\")*.
- Send *Deprecation: true* + *Sunset: RFC‑date* headers for affected
  routes.
- **Notice window:** ≥ **90 days** before removal.
- **Docs banner** and email to registered partners.

**Q.5 Error behavior around sunset**

- Before sunset: warning headers only.
- After sunset: *410 Gone* for removed routes/fields with link to
  migration notes.

**Q.6 Artifacts**

- *api/docs/versioning.md* (policy)
- *api/changelogs/v1.md* (per change with examples)
- *contracts/\** (snapshots per MINOR release)

**Q.7 Acceptance**

- No partner experiences a silent break; all deprecations carry
  *Sunset*; migration notes exist; contract tests pass for *v1.\**.

## **Appendix R --- Rate Limits & Quotas Catalog**

**Purpose.** Protect reliability, curb abuse, and make limits
predictable for users and partners.

**R.1 Enforcement model**

- Token‑bucket with leaky‑bucket smoothing; limits applied **per IP**
  (public) and **per user/API key** (auth).
- Responses include *X‑RateLimit‑Limit*, *X‑RateLimit‑Remaining*,
  *Retry‑After*.

**R.2 Default limits (calibrated for MVP; tunable by config)**

  ---------------------------------------------- --------------------------------------------- ----------------- ----------------------------------------------
  **Surface**                                    **Limit**                                     **Scope**         **Notes**
  Login attempts                                 **5 / min**                                   per IP & email    CAPTCHA after soft lock
  Signup                                         **3 / min**                                   per IP            Risk‑based CAPTCHA
  Password reset                                 **3 / 10 min**                                per email         Code brute‑force guarded
  GraphQL search (*searchPeople/Studios/Work*)   **20 / mi