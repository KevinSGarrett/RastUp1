<!-- id: TD-0176 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 633600-637600 -->

always notify): booking starting \< 12h;
  reschedule requests expiring \< 6h; dispute activity; payment/escrow
  failures. User may override these exceptions in preferences.

NonTechBlueprint

## **1.4.G Anti‑circumvention patterns & thresholds**

**Goal:** keep value on‑platform (escrow, protection, reviews) while
being fair and transparent.

NonTechBlueprint

**Risk signals (scored):**

- **Keywords & euphemisms** for off‑platform pay: *cash
  app\|cashapp\|venmo\|zelle\|paypal\|wire\|bank transfer\|invoice
  me\|outside platform\|off platform\|pay direct\|send to my
  email\|onlyfans tip\|telegram\|whatsapp\|snap* (+ common
  variants/obfuscations: *v3nm0*, *ca\$h app*, *wh\*tsapp*).
- **Link domains**: high‑risk (payment/chat domains).
- **New account** + high send rate + copy‑paste patterns.
- **Repeated attachment of QR codes** or payment handles.

**Thresholds/Actions (initial):**

- **Score \< 3** → show **nudge banner**: "Keep payments on RastUp for
  protection."
- **3 ≤ score \< 6** → throttle new messages (cool‑down 30--60s),
  disable external links in that thread.
- **Score ≥ 6 or repeat within 24h** → soft‑block thread; create
  **Safety card** with prefilled reason; route to Admin case.
- **Gross violation** keywords (e.g., explicit request to bypass escrow)
  → immediate soft‑block + case.\
  All actions are **transparent** in‑thread, with a link to policy.

NonTechBlueprint

## **1.4.H Admin case‑bound access to threads**

- **Case scope**: Admin sees only the threads tied to the case
  (dispute/safety).
- **JIT tokens**: time‑boxed read access; all views/actions written to
  the **audit trail** with reason codes.
- **PII redaction**: transient secrets (door codes, phone, emails)
  masked unless escalation level requires full view.
- **Actions**: mark as reviewed, apply holds, unblock, redact messages
  (legal), export evidence pack for chargeback.

## **1.4.I Credits, contact filters & rate limits**

- **New conversation credits** per month (configurable); **bonus
  credits** for verified users (as defined elsewhere). Replies and
  confirmed booking threads are **unlimited**.

NonTechBlueprint

- **Contact filters**: talent may require **ID‑Verified only**, minimum
  details (date, city, budget) before a Message Request is allowed to
  bypass.

NonTechBlueprint

- **Rate limits** (Dynamo token bucket):

  - New users: 3 new conversations/hour; 20/day.
  - Verified: 10/hour; 100/day.
  - Bursts punished (cool‑down) if \>2 similar messages in 60s.

## **1.4.J Safety, attachments & retention**

- **Attachment scanning**: S3 → Lambda AV scan; quarantine until clean;
  images re‑encoded; videos metadata verified.
- **Safe‑Mode previews**: SFW enforcement in inbox previews (blur/label
  when required).

NonTechBlueprint

- **Retention**: keep messages indefinitely; auto‑archive stale threads
  after 180 days (user can unarchive); purge spam after N days.

## **1.4.K Error codes (selected)**

- *MSG_GATE_REQUIRED* (Message Request pending)
- MSG_BLOCKED_BY_USER
- *CARD_EXPIRED* / *CARD_INVALID*
- RATE_LIMITED
- SAFETY_SOFT_BLOCK
- ATTACHMENT_QUARANTINED

## **1.4.L Observability & KPIs (expansion)**

- **Core**: request→accept rate, time‑to‑first‑response, card accept
  rate, reschedule success, extras attach rate, dispute rate,
  block/report rate.

NonTechBlueprint

- **Safety**: nudge impressions → behavior change; soft‑blocks/day; case
  resolution times.
- **Delivery**: p95 publish→deliver latency (\< 250ms); push send→open
  CTR; digest open rate.

## **1.4.M Work packages (Cursor 4‑agent lanes --- continued)**

- **Agent A --- Cards & Mutations**: JSON schemas; server validators;
  accept/decline/counter mutations; audit.
- **Agent B --- Search & Index**: Typesense mapping, ingestion jobs,
  query parser (filters & tokens).
- **Agent C --- Presence & Notifications**: typing/presence infra;
  read/delivered; push/email templates; digest builder.
- **Agent D --- Safety & Rate Limits**: anti‑circumvention rule