<!-- id: TD-0187 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 673200-677200 -->

lt 0, \-- computed*\
*created_at timestamptz default now(),*\
*updated_at timestamptz default now()*\
*);*\
\
*create table profile.role_profile (*\
*role_profile_id text primary key, \-- rpf\_\...*\
*user_id text not null references profile.user_profile(user_id) on
delete cascade,*\
*role_code text not null, \--
model\|photographer\|videographer\|creator\|mua\|stylist\...*\
*tagline text,*\
*experience_years int,*\
*genres text\[\] default \'{}\',*\
*city text, region text, country text,*\
*travel_radius_mi numeric default 0,*\
*hourly_hint_cents int, \-- optional display-only hint*\
*status text not null default \'draft\' \-- draft\|published\|paused*\
*);*\
\
*create table profile.service_profile (*\
*service_profile_id text primary key, \-- spf\_\...*\
*role_profile_id text not null references
profile.role_profile(role_profile_id) on delete cascade,*\
*title text not null,*\
*summary text not null,*\
*status text not null check (status in
(\'draft\',\'review\',\'published\',\'paused\')) default \'draft\',*\
*ib_allowed boolean not null default false, \-- Instant Book eligible*\
*city text, region text, country text,*\
*travel_pricing jsonb, \-- {base_mi:10, per_mile_cents:100,
free_radius_mi:5}*\
*license_policy jsonb, \-- see table below for defaults*\
*min_hours numeric default 1,*\
*booking_window_days int default 60, \-- how far out IB can book*\
*lead_time_hours int default 24, \-- min notice for IB*\
*cancellation_policy text not null default \'standard\', \-- maps to
§1.3 policy sets*\
*created_at timestamptz default now(),*\
*updated_at timestamptz default now()*\
*);*\
\
*create table profile.package (*\
*package_id text primary key, \-- pkg\_\...*\
*service_profile_id text not null references
profile.service_profile(service_profile_id) on delete cascade,*\
*title text not null,*\
*description text,*\
*duration_minutes int not null, \-- 60, 120, \...*\
*price_cents int not null,*\
*deliverables text\[\], \-- \[\"15 edited photos\", \...\]*\
*max_people int, \-- for modeling sessions*\
*includes_studio boolean default false, \-- if includes host studio*\
*ordinal int not null default 0,*\
*active boolean not null default true*\
*);*\
\
*create table profile.extra (*\
*extra_id text primary key, \-- ext\_\...*\
*service_profile_id text not null references
profile.service_profile(service_profile_id) on delete cascade,*\
*title text not null,*\
*description text,*\
*unit text not null default \'each\', \-- each\|hour\|day*\
*unit_cents int not null,*\
*max_qty int,*\
*ordinal int not null default 0,*\
*active boolean not null default true*\
*);*\
\
*create table profile.license_tier_def (*\
*license_code text primary key, \--
\'commercial\',\'ads\',\'exclusive\',\'buyout\'*\
*title text not null,*\
*description text,*\
*multiplier numeric not null \-- e.g., 1.0, 1.5, 2.0, 4.0*\
*);*\
\
*create table profile.availability_rule (*\
*rule_id text primary key,*\
*role_profile_id text not null references
profile.role_profile(role_profile_id) on delete cascade,*\
*weekday_mask int not null, \-- bitmask Mon..Sun*\
*start_local time not null,*\
*end_local time not null,*\
*timezone text not null, \-- e.g., \'America/Los_Angeles\'*\
*effective_from date not null default now(),*\
*effective_to date*\
*);*\
\
*create table profile.asset (*\
*asset_id text primary key,*\
*user_id text not null references profile.user_profile(user_id) on
delete cascade,*\
*kind text not null check (kind in
(\'avatar\',\'cover\',\'gallery\')),*\
*s3_key_original text not null,*\
*s3_key_web text,*\
*width int, height int,*\
*ordinal int default 0,*\
*sfw_band smallint not null default 0,*\
*status text not null default \'active\' \-- active\|blocked*\
*);*\
\
*commit;*\

**Notes**\
• Licensing multipliers are defaults; SPs can override in
*service_profile.license_policy* (e.g., fixed adders).\
• Availability rules are separate from **blackouts** (handled globally
in §1.24 for studios and here via booking window + rules).

## **1.7.4 GraphQL API (App