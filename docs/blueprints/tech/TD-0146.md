<!-- id: TD-0146 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 525600-529600 -->

mary key, \-- aud\_\...*\
*actor_admin text not null,*\
*resource text not null, \-- \'user:usr\_\...\',\'order:ord\_\...\'*\
*action text not null,*\
*payload jsonb,*\
*ip inet,*\
*user_agent text,*\
*created_at timestamptz default now()*\
*);*\
\
*commit;*\

**Immutable stream.** All *admin_audit* rows also appended to S3 with
**Object Lock** (WORM).

## **1.26.5 Modules & screens**

### **A) User management**

- Search by email/id; view profile, verification (IDV/payment/connected
  acct), recent orders/threads.
- Actions: **suspend / reinstate**, reset MFA, force logout, grant
  limited credits (support goodwill), toggle **Safe‑Mode default**.
- Hard deletes disabled; DSAR export (bundle profile + docs + orders)
  and deletion request workflow.

### **B) Listing management**

- People and Studios: publish/unpublish, verification badges
  (Trusted/Verified Studio Lite), hazard flags, surveillance disclosure
  check, COI required flag.
- Media moderation: replace/remove, mark reason; thumbnail regeneration
  job trigger.
- Address privacy: preview public (approx geohash) vs internal exact
  address.

### **C) Trust & Safety casework**

- Queues: **Reports**, **DMCA**, **Disputes**, **Appeals**, **Fraud
  investigations**.
- Case view: timeline (events, messages, evidence), linked
  order/thread/listing, SLA timer, canned responses.
- Actions: request evidence (auto‑asks parties), temporary **mute**,
  **block**, **shadow‑ban**, **suspend**.
- Messaging access is **case‑bound**: open a thread in read‑only or
  limited reply mode; every view is audited.

### **D) Finance Ops**

- Cohesive view of **orders**, **transfers**, **refunds**, **payouts**
  (joins §1.22 ledgers).
- Actions: issue refund (full/partial), hold/release payout, deposit
  capture after mediation, adjust payout schedule/reserve.
- Reconciliation viewer (Silver models): detect variances, export CSV.

### **E) Search curation (§1.21)**

- Pin/unpin entities per city/query with TTL; synonym CRUD; zero‑results
  dashboard.

### **F) Smart Docs admin (§1.25)**

- Templates (versioned & localized) CRUD; preview in context; envelope
  monitor (status, re‑send, void).

### **G) Content Ops (CMS)**

- **Help Center** articles; **Announcements** (sitewide
  banner/city‑specific); **City page snippets** for SEO.
- Scheduled publish; localization keys; image library with S3.

### **H) Flags & configuration**

- Feature flags (IB eligibility, Safe‑Mode defaults, response SLA,
  deposit capture rules).
- Risk/rate‑limit knobs (token buckets for messaging, signup throttles,
  3DS enforcement thresholds).
- City activation toggles.

## **1.26.6 Admin API (GraphQL)**

**Recommended path:** *api/schema/admin.graphql*

*enum CaseKind { REPORT DMCA DISPUTE APPEAL FRAUD }*\
*enum CaseStatus { NEW TRIAGE INVESTIGATING AWAITING_USER RESOLVED
CLOSED }*\
\
*type AdminCase {*\
*caseId: ID!, kind: CaseKind!, status: CaseStatus!, priority: Int!,*\
*subjectUser: ID, orderId: ID, threadId: ID, listingId: ID,*\
*summary: String!, slaDueAt: AWSDateTime, timeline: \[AdminAction!\]!*\
*}*\
*type AdminAction { actionId: ID!, actorAdmin: ID!, action: String!,
payload: AWSJSON, createdAt: AWSDateTime! }*\
\
*type Query {*\
*adminSearchUsers(q: String!, limit: Int = 25): \[AWSJSON!\]!
\@auth(role: \"support\")*\
*adminGetCase(caseId: ID!): AdminCase! \@auth(role: \"trust_safety\")*\
*adminListCases(kind: CaseKind, status: CaseStatus, page: Int = 1):
\[AdminCase!\]! \@auth(role: \"trust_safety\")*\
*adminRecon(orderId: ID!): AWSJSON! \@auth(role: \"finance_ops\")*\
*}*\
\
*type Mutation {*\
*adminCreateCase(kind: CaseKind!, summary: String!, subjectUser: ID,
orderId: ID, threadId: ID, listingId: ID): ID! \@auth(role:
\"trust_safety\")*\
*adminAddAction(caseId: ID!, action: String!, payload: AWSJSON):
Boolean! \@auth(role: \"trust_safety\")*\
*adminSuspendUser(userId: ID!, reason: String!): Boolean! \@auth(role:
\"trust_safety\")*\
*adminReinstateUser(userId: ID!): Boolean! \@auth(role:
\"trust_sa