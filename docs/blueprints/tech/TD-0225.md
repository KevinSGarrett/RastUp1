<!-- id: TD-0225 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 810000-814000 -->

nless rebooked

- **Studio kernel** (space): depends on **min hours**, **buffers**, and
  whether **deposit** exists; see §1.24 rules.

- **Deliverable kernel** (milestone jobs): if delivered and approved,
  refund only by goodwill or dispute resolution.

**Implementation**: pricing service computes *eligible_refund_cents*
from **policy snapshot** on the order; Support UI shows both
**automatic** and **max allowed** options.

## **1.15.6 Evidence stitching (timeline pack)**

When a case opens or moves to **Investigating**:

- Pull **thread messages**, **Action Cards**, **contracts** (Smart
  Docs), **deliverables/proofs** (Media), **payment**/refund/payout
  records, **calendar** events/holds, and **location** metadata.
- Produce a **chronological timeline** for the case UI and a zipped
  export (PDF/CSV + attachments) for legal or chargebacks.
- DMCA cases store claimant statements, content links, and takedown
  decisions.

## **1.15.7 Refunds & charges (Stripe)**

- **Issue refund** mutation calls Stripe Refund API, writes
  *sup.refund*, appends case events, and sends notifications.
- **Partial refunds** create ledger reversals for the affected line
  items; if a **transfer** occurred, create **transfer reversal**
  (Stripe Connect).
- **Auto-refunds**: buyer/provider cancellations trigger case entries
  automatically, referencing the kernel result.

## **1.15.8 Chargebacks (card network disputes)**

- On *charge.dispute.created* webhook: open or attach to a **chargeback
  case** with due date; auto-generate **evidence pack** (contracts,
  proofs, approvals, check-in/out, device/IP) and upload to Stripe.
- Suspend **payout release** & reserves until outcome.
- On closure: mark *won/lost*; ledger entries posted; notifications
  sent.

## **1.15.9 DMCA pipeline**

- Intake form requires sworn statement; create **DMCA case**; **hide**
  content immediately (blinded in threads & public); notify uploader.
- **Counter-notice** window; on valid counter, restore unless court
  order prohibits.
- Repeat-offender tracking in Trust flags (§1.5); escalation per policy.

## **1.15.10 Email bridge (SES) for support replies**

- Each case has an alias: *case+{case_id}@support.{domain}*.
- SES inbound rule → Lambda → *sup.case_event* (actorKind=*user*,
  type=*note*, payload includes sanitized HTML & attachments).
- Outbound emails include **Message-ID** / **In-Reply-To** headers to
  preserve threading.
- Attachments virus-scanned; PII redaction allowed.

## **1.15.11 Automations & macros**

- **Macros**: refund ladder, IB pause, request info, DMCA hide/restore,
  dispute evidence request.
- **Automations**: SLA breach escalations, response nudges, auto-close
  after inactivity, **auto-expire** low-priority cases with self-serve
  steps completed.
- **QA sampling**: 5% of resolved cases sampled weekly for accuracy &
  empathy; results logged.

## **1.15.12 Notifications (per §1.10)**

- **Users**: ticket created/updated/resolved; refund processed; payment
  failed; dispute updates.
- **Admins**: P0 breach paging; surge alerts; dispute due soon; DMCA
  counter received.
- **Quiet Hours**: user notices obey Quiet Hours except **critical**
  (payment failure, dispute/DMCA deadlines).

## **1.15.13 Observability, KPIs & SLOs**

- **Events**: *case.open\|assign\|status*,
  *refund.proposed\|succeeded\|failed*, *hold.apply\|release*,
  *chargeback.open\|submit\|closed*, *dmca.hide\|restore*, *sla.breach*.
- **KPIs**: FRT/TTR by priority; refund %; dispute win rate; % cases
  requiring human review; cost/ticket; safety incidents per 100
  bookings.
- **SLO targets**: FRT P1 ≤ **4h**, P0 ≤ **30m**; resolution p95 ≤
  **72h** (non-chargeback); 98% evidence bundles built within **15m** of
  dispute open.

## **1.15.14 Work packages (Cursor --- 4 agents)**

- **Agent A --- Case Core**: DDL, GraphQL, timeline, SLA timers,
  assignment, audit mirroring.
- **Agent B --- Refunds/Holds**: kernel evaluator, refund API, transfer
  reversals, hold/release f