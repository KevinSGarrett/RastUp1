<!-- id: TD-0156 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 561600-565600 -->

 **Tag collaborators** on portfolio items; collaborators must
  **approve** or **decline** the credit before their avatar/name
  appears; collaborator chips **open profiles**.

NonTechBlueprint

- **Boards** (collections) across People, Studios, and Portfolio items;
  **Add to Board** from any eligible card; event telemetry *board.add*.

NonTechBlueprint

- **Studio linking**: portfolio items can show the **studio used** and
  link to that studio page; role profiles can show "Has/Owns Studio"
  chips; telemetry *studio.link.click*.

NonTechBlueprint

- **Safe‑Mode**: public surfaces remain **SFW**; anything beyond
  permitted tiers is hidden or "blurred with label" per policy when
  Safe‑Mode is ON.

NonTechBlueprint

## **1.29.2 Architecture (cost‑conscious, elastic)**

- **Frontend:** Next.js (web) SSR for profile tabs; React Native
  (mobile) with identical data shape.
- **API:** AppSync GraphQL with Lambda resolvers.
- **Storage:** S3 (versioned) for images/video; CloudFront delivery;
  optional **on‑upload transforms** (thumbs, web‑optimized).
- **Search/Discovery:** Typesense collections for light faceting
  ("genres", "city", "role"), plus profile ranking signals.
- **Moderation & policy:** Safe‑Mode renderer + optional Rekognition
  moderation check; DMCA/T&S flows via Admin (§1.28).
- **Cost posture:** No external DAM/SaaS. S3 lifecycle → IA/Glacier;
  CloudFront caching; transforms cached.

## **1.29.3 Data model (Aurora PostgreSQL + S3)**

**Tables (schema** ***portfolio*****)**

- portfolio_item

  - *item_id pk*, *owner_user_id*, *role_profile_id*, *title*, *slug*,
    *city*, *shoot_date*, *genres text\[\]*,\
    *cover_media_id*, *sfw_band smallint*, *status
    enum(\'draft\',\'pending\',\'published\',\'archived\',\'blocked\')*,\
    *verified_booking_order_id nullable*, *studio_id nullable*,
    *created_at*, *updated_at*.
  - Notes: *sfw_band* drives Safe‑Mode visibility;
    *verified_booking_order_id* shows a "Verified booking" badge when
    present. **All public media must be SFW.**

NonTechBlueprint

- portfolio_media

  - *media_id pk*, *item_id fk*, *kind enum(\'image\',\'video\')*,
    *s3_key_original*, *s3_key_web*, *width*, *height*, *duration_sec
    nullable*, *ordinal*, *alt_text*.

- *portfolio_case_study* (optional, attached to *item_id*)

  - *client_type*, *summary*, *deliverables text\[\]*, *results text*,
    *budget_range_low_cents*, *budget_range_high_cents*.

- portfolio_collab_tag

  - *item_id fk*, *collaborator_user_id*, *role_code*, *status
    enum(\'pending\',\'approved\',\'declined\')*, *note*,
    *evidence_order_id nullable*, *created_at*.
  - Drives **tagging & approvals**; only **approved** collaborators
    render as chips that **open profiles**.

NonTechBlueprint

- board

  - *board_id pk*, *owner_user_id*, *title*, *visibility
    enum(\'private\',\'unlisted\',\'public\')*, *city nullable*,
    *created_at*.

- board_item

  - *board_id fk*, *entity_type
    enum(\'person\',\'studio\',\'portfolio_item\')*, *entity_id*, *note
    nullable*, *ordinal*.

**S3 prefixes**

- *portfolio/{ownerUserId}/{itemId}/media/\** (original & web)
- *boards/{ownerUserId}/{boardId}/share/\** (share images, optional)

## **1.29.4 GraphQL schema (selected)**

*(file: api/schema/portfolio.graphql)*

*type PortfolioItem {*\
*id: ID!, title: String!, slug: String!, ownerUserId: ID!,
roleProfileId: ID!,*\
*city: String, shootDate: AWSDate, genres: \[String!\]!,*\
*cover: Media!, media: \[Media!\]!, caseStudy: CaseStudy,*\
*studioUsedId: ID, verifiedBooking: Boolean!, sfwBand: Int!, status:
String!,*\
*collaborators: \[CollabTag!\]!*\
*}*\
\
*type Media { id: ID!, kind: String!, url: AWSURL!, width: Int, height:
Int, durationSec: Int, altText: String }*\
*type CaseStudy { clientType: String, summary: String, deliverables:
\[String!\], results: String, budgetLowCents: Int, budgetHighCents: Int
}*\
*type CollabTag { userId: ID!, roleCode: String!, status: String!, note:
String }*\
\
*type Board { id