<!-- id: TD-0153 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 550800-554800 -->

ened_by text not null, \-- usr\_\... or system*\
*subject_user text,*\
*order_id text,*\
*thread_id text,*\
*listing_id text,*\
*summary text not null,*\
*sla_due_at timestamptz,*\
*created_at timestamptz default now(),*\
*updated_at timestamptz default now()*\
*);*\
\
*create table admin_action (*\
*action_id text primary key, \-- act\_\...*\
*case_id text references admin_case(case_id) on delete cascade,*\
*actor_admin text not null, \-- OIDC subject*\
*action text not null, \--
\'suspend\',\'refund\',\'request_evidence\',\'note\',\'close\',\...*\
*payload jsonb,*\
*created_at timestamptz default now()*\
*);*\
\
*create table admin_audit (*\
*audit_id text primary key, \-- aud\_\...*\
*actor_admin text not null,*\
*resource text not null, \--
\'user:usr\_\...\',\'order:ord\_\...\',\'doc:doc\_\...\'*\
*action text not null,*\
*payload jsonb,*\
*ip inet,*\
*user_agent text,*\
*created_at timestamptz default now()*\
*);*\
\
*commit;*\

**Immutable stream:** all *admin_audit* rows mirrored to S3 bucket with
**Object Lock (WORM)**; lifecycle and retention per §1.18.

## **1.28.5 Modules & screens**

### **A) User management**

- Search by email/id; profile verification status; recent
  orders/threads; Safe‑Mode default.
- Actions: **suspend/reinstate**, reset MFA, force logout, grant
  goodwill **credits** (amount‑limited), DSAR export & deletion request
  workflow (with legal holds).

### **B) Listing management (People & Studios)**

- Publish/unpublish; verification badges (Trusted Pro / Verified Studio
  Lite); hazard & surveillance disclosure flags; **COI required** toggle
  (ties to §1.24 addendum).
- Media moderation (remove/replace/regen thumbs) with reason codes;
  public preview vs internal exact address check.

### **C) Trust & Safety casework**

- Queues: **Reports**, **DMCA**, **Disputes**, **Appeals**, **Fraud**.
- Case view: timeline of events, linked order/thread/listing, SLA timer,
  canned responses.
- Actions: request evidence (auto‑asks parties), temporary **mute**,
  **block**, **shadow‑ban**, **suspend**.
- **Case‑bound message access:** open thread in read‑only or limited
  reply; every view/action audited.

### **D) Finance operations**

- Unified view of **orders/transfers/refunds/payouts** (joins §1.22
  ledgers and Stripe data).
- Actions: refund (full/partial), **payout hold/release**, deposit
  capture (post‑mediation), adjust payout schedule/reserve.
- Reconciliation viewer (Silver models) with export/variance flags.

### **E) Search curation (ties §1.21)**

- Pin/unpin results per city/query with TTL; synonyms CRUD; zero‑results
  dashboard with suggestions to Content Ops.

### **F) Smart Docs admin (ties §1.26)**

- Template library (versioned & localized), preview in context; envelope
  monitor (status/resend/void); policy knobs (expiry, reminder cadence).

### **G) Content Ops (light CMS)**

- Help Center articles (Markdown→HTML), **Announcements** (global or
  city‑scoped banners), **City page snippets** for SEO.
- Schedule publish; localization keys; S3 media library; all content
  versioned.

### **H) Feature flags & risk knobs**

- Flags: Instant Book eligibility, response SLA/autocancel, deposit
  capture policy, Studio Lite requirement, city activation.
- Risk knobs: message starts/hour, signup ip/day, 3DS enforcement
  threshold; **4‑eyes approval** for high‑impact changes.

## **1.28.6 Admin API (GraphQL)**

**Recommended path:** *api/schema/admin.graphql*

*enum CaseKind { REPORT DMCA DISPUTE APPEAL FRAUD }*\
*enum CaseStatus { NEW TRIAGE INVESTIGATING AWAITING_USER RESOLVED
CLOSED }*\
\
*type AdminCase {*\
*caseId: ID!, kind: CaseKind!, status: CaseStatus!, priority: Int!,*\
*subjectUser: ID, orderId: ID, threadId: ID, listingId: ID,*\
*summary: String!, slaDueAt: AWSDateTime, timeline: \[AdminAction!\]!*\
*}*\
*type AdminAction { actionId: ID!, actorAdmin: ID!, action: String!,
payload: AWSJSON, createdAt: AWSDateTime! }*\
\
*type Query {*\
*adminSearchUsers(q: String!, limit: Int = 25)