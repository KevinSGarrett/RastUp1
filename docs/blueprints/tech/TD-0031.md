<!-- id: TD-0031 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 111600-115600 -->

ustedPro: Boolean!*\
*socialVerified: Boolean!*\
*riskScore: Int!*\
*lastIdvAt: AWSDateTime*\
*lastBgAt: AWSDateTime*\
*}*\
\
*type Query {*\
*trustStatus: TrustStatus!*\
*socialConnections: \[SocialConnection!\]!*\
*}*\
\
*type Mutation {*\
*startIdv: IdvSession! \# create new provider session*\
*refreshIdvStatus: TrustStatus! \# polling fallback*\
*startBackgroundCheck: BgInvitation! \# sends FCRA consent flow*\
*disconnectSocial(platform: SocialPlatform!): Boolean!*\
*connectSocial(platform: SocialPlatform!): SocialConnection! \# returns
OAuth URL*\
*}*\

**Server rules**

- *startBackgroundCheck* prompts user with **FCRA consents** and a clear
  explanation; check is optional; badge used as a positive signal only.
- *startIdv* requires logged-in user; if an active IDV *pending*,
  returns that session to avoid duplicates.

## **1.6.F Integration points**

- **Search (§1.2)**: include *verification.id*, *trustedPro*,
  *socialVerified* in index docs; apply **verified-only** filter when
  toggled; ranking boosts as configured.

- **Booking & Checkout (§1.3)**:

  - **Instant Book** path checks *idVerified=true* before allowing.
  - For Fan-sub or 18+ toggles, ensure **age_verified=true** before
    exposing surfaces.

- **Messaging (§1.4)**: show badges on thread headers; anticircumvention
  policies apply regardless of badges.

- **Admin**: trust tiles show IDV/BG status; overrides require reasons
  and are flagged for later audit.

## **1.6.G Risk signals & throttles**

**Signals (rolled up daily/weekly):**

- Disputes opened, refunds requested, cancellations late, late delivery
  ratio, payment failures, invalid-click attributions (as buyer/seller),
  moderation flags.

**Score (0--100):**\
Weighted sum with decay---recent events weigh more. Thresholds:

- **Watch (≤60)** → warnings; **limit** high-risk features (promotions,
  instant payouts).
- **Action (≤40)** → suspend **Instant Book** and **Promotions**; manual
  review.
- **Critical (≤25)** → pause payouts pending review; city-gated exposure
  reduced.

**Throttles:**

- Limit number of open proposals, outgoing messages per minute, or daily
  instant payout requests when below thresholds.

## **1.6.H Admin consoles & workflows**

**Trust Dashboard**

- Global view of IDV/BG states, expiring badges, risk heatmap, and
  incident queues.

**IDV review**

- Queue for *requires_review* statuses; approve/deny with reason; can
  trigger re-run.

**BG adverse action**

- Pre-adverse and adverse templates (email); waiting period timers;
  record of user acknowledgment; **no details** beyond provider's
  permitted disclosure. All steps audited.

**Overrides**

- Temporarily grant/revoke badges (two-person approval); set review
  flags; lock user for legal holds.

**Exports**

- CSV of trust states; incident logs; provider reconciliation reports.

## **1.6.I Webhooks → normalized events**

- idv.started\|passed\|failed\|expired
- bg.invited\|in_progress\|clear\|consider\|suspended\|disputed\|expired
- social.connected\|verified\|revoked
- *risk.score.updated*\
  Each event includes *user_id*, provider_ref, and relevant timestamps.

**Idempotency:** dedupe by *(provider, provider_event_id)*; keep last
processed id per provider.

## **1.6.J Privacy & retention**

- **Store only** provider refs/state and non-PII summaries (age-verified
  boolean, adjudication summaries).
- No images/scans of IDs at rest in our DB/S3.
- Retention windows: IDV and BG statuses kept for 7 years or as required
  by policy; social snapshots roll daily with 30--90 day retention.

**Access control:**

- Trust data visible to user (their statuses) and Admin roles only; not
  exposed to other users.
- Audit logs for every access by Admin with reason.

## **1.6.K Error taxonomy (client-safe)**

- *IDV_PROVIDER_UNAVAILABLE* --- retry or switch later.
- *IDV_FAILED* --- provide appeal/retry path.
- *BG_CONSENT_REQUIRED* --- user must accept consents.
- *BG_IN_PROGRESS* --- already running; point to status vie