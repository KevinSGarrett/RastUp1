<!-- id: TD-0270 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 972000-976000 -->

igned chunked uploads, resumable
  queue, EXIF strip, moderation hooks.
- **Agent C --- Push & Deep Links**: device register GraphQL, prefs
  center, Web Push, deep link router; later APNs/FCM setup.
- **Agent D --- Quality & Perf**: mobile CWV budgets/Lighthouse CI, a11y
  checks, device matrix & runbooks; RN Detox harness (Phase‑2).

## **1.26.16 Tests (representative)**

4602. **Offline**: cached pages render; drafts persist; outbox replays
      on reconnect.
4603. **Uploads**: chunk retries work; manifest survives app restarts;
      EXIF stripped; SFW variant used publicly.
4604. **Push**: device register/unregister; quiet hours honored;
      fallback to email/SMS when push off.
4605. **Deep links**: thread/profile/studio/work open correct route;
      app‑not‑installed → web fallback.
4606. **Auth**: cookie/session renewal works on PWA; RN secure storage
      persists tokens across restarts.
4607. **A11y**: no serious axe violations on mobile routes; RN
      components have labels & roles.
4608. **Perf**: CWV budgets green p75; RN TTI within target on matrix
      devices.
4609. **Privacy**: caches purged on logout/DSAR; no PII in client logs.

## **1.26.17 Artifacts (paste‑ready)**

- *api/schema/device.graphql* --- device registration & prefs.
- *db/migrations/033_device_push.sql* --- device tokens & prefs.
- *web/public/manifest.webmanifest*, *web/sw.js* --- PWA shell.
- *web/i18n/mobile.md* --- mobile copy keys & ICU notes.
- *web/deeplinks/\** --- AASA & assetlinks templates.
- *services/media/upload_session.ts* --- pre‑signed chunk flow.
- *.github/workflows/mobile-cwv.yml* --- Lighthouse CI for mobile
  routes.
- *e2e/mobile/\** --- Playwright scripts; Detox harness (Phase‑2).

## **1.26.18 Acceptance criteria --- mark §1.26 FINAL only when ALL true**

4618. PWA installs cleanly; offline shell & caching function; key mobile
      flows (search→book, message, help) work offline/spotty networks.
4619. Camera uploads are resumable; moderation & SFW variants enforced
      before public surfacing.
4620. Push works (web where supported); device tokens
      register/unregister; prefs & quiet hours honored; fallbacks
      active.
4621. Deep/universal links open correct routes; sharecards render SFW
      previews.
4622. A11y passes; CWV p75 and API p95 budgets green on mobile.
4623. RN scaffolding (if chosen) compiles; Detox smokes pass; store
      metadata prepared (Phase‑2).
4624. Cost posture remains within MVP budget (no native until metrics
      gate is met).

# **§1.27 --- Developer / Partner API & Webhooks (External Integrations, OAuth, Rate Limits & Docs)**

**Full Technical Development Plan (single copy‑paste block for your
master doc)**

**Purpose.** Enable vetted partners (agencies, CRMs, studio tools) to
integrate with RastUp safely: read public inventory
(profiles/studios/work), receive **webhooks** for bookings/messages,
create **invitations/briefs**, and reconcile **payouts**---while
protecting privacy, enforcing Safe‑Mode, and keeping costs elastic.
Internally we stay GraphQL‑native; externally we expose a
**REST+Webhooks** façade with OAuth 2.0.

## **1.27.1 Scope & invariants**

- **Musts**: OAuth 2.0 (authorization code), signed **webhooks** with
  retries/Idempotency, **least‑privilege scopes**, Safe‑Mode on any
  public data, PII minimization (no emails/phones by default), and
  **per‑partner rate limits**.
- **Won'ts (MVP)**: no partner write‑access to calendar or pricing; no
  bulk media uploads; no NSFW assets in any partner feed.
- **Cost posture**: API Gateway + Lambda + Aurora reads with caching;
  webhook delivery via EventBridge/Lambda; no persistent partner
  connections.

## **1.27.2 External API surface (REST)**

**Base URL**: [*https://api.rastup.com/v1/*](https://api.rastup.com/v1/)

**Resources & verbs (MVP)**

- *GET /profiles* --- list public provider profiles (SFW‑safe):
  *?city=&role=&verified=&updated_after=*
- *GET /profiles/{id}* --- details (SFW fields only).
- *GET /st