<!-- id: TD-0243 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 874800-878800 -->

firmation; before that, show **neighborhood** and generic map pin.
- **IDV/phone** gate (optional): for high‑risk studios, require buyer
  IDV before confirming.
- **Deposit capture.** If *authorization_hold*, create Stripe auth (void
  on clean checkout); if *charge_refundable*, refund on no‑damage
  (support case closes); if *nonrefundable_fee*, non‑reversible.
- **Add‑ons** selectable at checkout; additional add‑ons can be added
  **post‑booking** via an amendment order (Action Card §1.14).

## **1.19.9 Search, SEO & growth integration**

- **Search facets**: *city*, *amenities\[\]*, *verified*, *hourly_min*,
  *nsfw_band* (always ≤1 for public). (§1.18)
- **Programmatic pages**: city×"studios" landing in SEO (§1.17) with
  unique copy & SFW hero.
- **Feed**: "Studio slot open next weekend" post type (growth §1.16).
- **Referrals**: provider‑invites‑provider awards once a studio
  publishes and completes first booking (§1.16).

## **1.19.10 Notifications (§1.10)**

- **Buyer**: booking request received/approved/declined; deposit status;
  overtime/cleaning fee adjustments.
- **Host**: new request; IB confirmation; calendar conflicts; deposit
  released; dispute opened.
- **Admin**: P0 failures (double‑book), high‑value charge fail,
  suspicious doc patterns.

## **1.19.11 Observability, KPIs & SLOs**

**Events**:\
*studio.create\|publish\|suspend*,
*studio.doc.submit\|approve\|reject*,\
*studio.booking.request\|confirm\|cancel\|no_show*,\
*studio.deposit.hold\|capture\|void\|refund*,\
*calendar.hold.apply\|convert\|release* (resource=studio),\
*checkout.overtime\|cleaning.adjust*.

**KPIs**:

- Publish→first booking time; IB share; cancellation rate by time band;
  deposit usage rate; overtime incidence; SFW compliance errors; dispute
  rate.

**SLOs**:

- Hold apply/convert/release actions **\< 500 ms** p95; verification
  review p95 **≤ 24h**; double‑booking incidents **= 0**.

## **1.19.12 Cost posture & dependencies**

- **Amplify Hosting (Gen‑2)** + **AppSync** + **Lambda** + **Aurora
  Serverless v2** + **S3 + CloudFront** + **AWS Location** (geocoding &
  maps) + **Typesense** (already deployed in §1.18).
- All compute paths are **serverless** except Typesense (ECS Fargate
  single‑node MVP).
- Image transforms at edge (Lambda@Edge/CloudFront functions) to keep
  CWV budgets (§1.17) while minimizing egress.

## **1.19.13 Work packages (Cursor --- 4 agents)**

- **Agent A --- Data & API Core**: DDL, GraphQL, secure address split,
  amenity/rule/add‑on subresources, verification docs.
- **Agent B --- Availability & Kernel**: availability template +
  blackouts; pricing kernel; buffers; overtime; deposit flows; Action
  Card hooks (§1.14).
- **Agent C --- UI/Front‑of‑house**: create/edit studio flow, media
  uploader (SFW default), public studio page, checkout widgets (add‑ons,
  deposits), post‑booking address reveal.
- **Agent D --- Admin & Ops**: verification console, moderation,
  suspension, ISR revalidation hooks, dashboards & alerts.

## **1.19.14 Tests (representative)**

3996. **Publish gating**: unverified studios cannot enable IB; Verified
      Studio badge renders post‑approval.
3997. **Pricing calculator**: min hours honored; overtime computed
      correctly; deposit applied per kind; add‑ons taxable flags
      respected.
3998. **Availability**: buffers enforce no overlaps; blackouts
      respected; overnight/day bookings supported.
3999. **Atomic holds**: holds apply and convert; failure releases;
      double‑book impossible.
4000. **Address privacy**: only visible to confirmed bookings & admins;
      neighborhood/pin shows to others.
4001. **Search/SEO**: facets present; public pages SFW; city×studios
      pages pass thin content gates (§1.17).
4002. **Verification**: document upload/review; rejection reasons
      stored; badge toggles.
4003. **Deposits**: auth hold → void on clean checkout; refundable
      charge → refund on resolution; nonrefundable fee → nonreversible.
4004. **Support**: dispu