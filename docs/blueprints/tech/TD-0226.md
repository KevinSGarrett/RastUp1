<!-- id: TD-0226 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 813600-817600 -->

SLO targets**: FRT P1 ≤ **4h**, P0 ≤ **30m**; resolution p95 ≤
  **72h** (non-chargeback); 98% evidence bundles built within **15m** of
  dispute open.

## **1.15.14 Work packages (Cursor --- 4 agents)**

- **Agent A --- Case Core**: DDL, GraphQL, timeline, SLA timers,
  assignment, audit mirroring.
- **Agent B --- Refunds/Holds**: kernel evaluator, refund API, transfer
  reversals, hold/release flows.
- **Agent C --- Chargebacks/DMCA**: webhook intake, evidence bundler,
  takedown/hide/restore, counter-notice.
- **Agent D --- Console/Automations**: admin UI (queues, macros), email
  bridge, SLA automations, QA sampling, dashboards.

## **1.15.15 Tests (representative)**

3697. **Booking no-show** (buyer): kernel → refund 0%; provider
      reputation not penalized; case closed with notes.
3698. **Provider cancel**: auto full refund; IB paused via macro; case
      resolution logs.
3699. **Partial refund** (deliverable shortfall): correct ledger
      reversal & Stripe refund; notifications sent.
3700. **Chargeback**: case opened via webhook; evidence bundle
      generated; outcome mirrored; reserve frozen/released.
3701. **DMCA**: takedown → content hidden everywhere; counter-notice →
      restored; audit trail intact.
3702. **SLA**: P1 clock → breach alert; agent action stops clock and
      records note.
3703. **Email bridge**: inbound reply attaches to case; spoof attempts
      rejected by DKIM/DMARC.
3704. **Privacy**: case-bound access only; PII redaction on attachments;
      short-TTL signed URLs.

## **1.15.16 Artifacts (paste-ready)**

- *db/migrations/023_support_center.sql* --- DDL above.
- *api/schema/support_center.graphql* --- resolvers skeleton above.
- *services/support/kernels.ts* --- refund policy evaluator.
- *services/support/evidence.ts* --- timeline pack + chargeback bundle
  builder.
- *services/support/email-bridge.ts* --- SES inbound/outbound handler.
- *observability/dashboards/support.md* --- KPIs/alerts specs.
- *ops/runbooks/\*.md* --- P0/P1 playbooks, chargeback steps, DMCA
  steps.

## **1.15.17 Acceptance criteria --- mark §1.15 FINAL only when ALL true**

3712. Users can create/view cases from Support Center; agents see
      **typed cases** with stitched **evidence timelines**.
3713. Refunds apply deterministically via policy kernels; overrides
      require two-person approval; ledger & Stripe in sync.
3714. Chargebacks integrate end-to-end (webhooks, evidence bundle,
      outcome posting); reserves/holds managed.
3715. DMCA intake hides content immediately; counter-notice and
      restoration flows work; immutable audit present.
3716. Email bridge functions; inbound replies thread to the correct
      case; attachments are scanned.
3717. SLA timers & automations (breach alerts, auto-close) active;
      dashboards show FRT/TTR, win rate, breach counts.
3718. Privacy enforced (case-bound access; redaction; short-TTL links);
      costs within plan (SES + serverless).

# **§1.16 --- Growth, Retention & Referrals --- Full Technical Spec (Consolidated)**

**Purpose.** Drive discovery and repeat bookings with **Saved Searches &
Alerts**, **Weekly City Digest**, a **unified Feed & Follow**,
**Sharecards & Link-in-Bio**, **Book-Again reminders (7/30/90)**, and
**two-sided Referrals**---all Safe-Mode compliant, cost-conscious,
measurable, and fraud-resistant.

## **1) Data model (Aurora, schema** ***growth*****) --- paste-ready DDL**

*begin;*\
\
*create schema if not exists growth;*\
\
*create table growth.saved_search (*\
*search_id text primary key, \-- ssv\_\...*\
*user_id text not null, \-- usr\_\...*\
*scope text not null check (scope in (\'people\',\'studios\')),*\
*city text not null,*\
*query_json jsonb not null, \-- ANY/ALL filters*\
*paused_until date,*\
*last_alert_dt date,*\
*created_at timestamptz default now(),*\
*updated_at timestamptz default now()*\
*);*\
\
*create table growth.saved_search_alert (*\
*alert_id text primary key, \-- ssa\_\...*\
*search_id text not null referen