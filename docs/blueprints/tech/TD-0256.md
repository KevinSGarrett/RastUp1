<!-- id: TD-0256 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 921600-925600 -->

og** rows with chain hashes.

## **1.22.5 Privileged workflows (macros)**

**1) DMCA Takedown**

- Inputs: case ID, URL(s)/asset IDs, claimant details.
- Macro: hide assets, mark content *blocked_dmca*, notify creator &
  claimant, revalidate ISR pages within 10 min (§1.17), add *audit_log*.
- Restore macro reverses with evidence on file.

**2) Suspend / Unsuspend Account**

- Triggers: fraud, safety violations, chargeback abuse.
- Action: *accounts.status=suspended*, revoke tokens, notify; optional
  **shadow‑ban** for investigation.
- Dual‑control required.

**3) Refund & Kernel Application (Orders)**

- Select policy band from §1.15 (time‑band kernel); tool computes
  allowed caps → apply partial/full refund via Stripe (or payment
  provider), post to ledger, notify both parties, and log action.

**4) Studio Verification Decision**

- View submitted docs (§1.19), approve/reject with notes, set
  *verification* status and *verified_chip*.

**5) City Spotlight & Featured**

- Toggle spotlight on city landing; edit featured flight inventory &
  density caps (§1.20), with **holdout%** preserved.

**6) Break‑glass (emergency)**

- Limited‑time elevated session (e.g., 60 min), reason required, **two
  approvals**, Slack page broadcast, start/end audit entries.

## **1.22.6 UI/UX (Next.js, Amplify Hosting Gen‑2)**

- **Global search**: person/studio/user/order/case/asset by ID or
  handle.

- **Entity dashboards**:

  - **User:** KYC/IDV status, trust signals, recent orders, disputes;
    macros (suspend, reset 2FA).
  - **Studio:** verification docs, amenities, bookings, disputes,
    content moderation.
  - **Order:** timeline, payments, refunds, chat transcript, kernel
    curve preview.
  - **Case:** ticket details, evidence pack, SLA timers.

- **Queues:** DMCA, verification review, disputes awaiting evidence,
  refunds pending approval, high‑risk payments.

- **Configs:** feature flags, city configs, promotions.

- **Watermarking:** all sensitive images/videos display a visible staff
  watermark & viewer ID.

## **1.22.7 Security, privacy & safety controls**

- **AuthN:** Staff SSO (Google/Microsoft) → Cognito federated; step‑up
  MFA for sensitive actions.
- **AuthZ:** ABAC derived from *role*, *city_scope*, and *team*; policy
  enforcers at resolver layer.
- **Row‑level masking:** PII fields (email, phone, address) redacted
  unless the role grants *view_pii*.
- **SFW default:** console thumbnails load SFW variants by default;
  explicit "view full asset" requires TrustSafety.
- **Immutability:** audit logs mirrored to S3 with **Object Lock
  (WORM)** and hashed chain for tamper evidence.
- **Secrets:** AWS Secrets Manager; no secrets in env vars.
- **Rate‑limit & IP allowlist:** admin endpoints behind WAF + CIDR
  allowlist.

## **1.22.8 Observability, KPIs & SLOs**

- **Events:** *admin.action.created\|approved\|executed\|failed*,
  *dmca.takedown\|restore*, *verif.approve\|reject*, *refund.apply*.
- **KPIs:** median time to action (DMCA, verification), % two‑man
  approvals met, refund error rate, double‑book incidents (should be 0),
  break‑glass usage.
- **SLOs:** P95 console API latency \< 300 ms; ISR revalidation \< 10
  min after DMCA; verification decision median \< 24 hours.
- **Alerts:** spike in suspensions, audit chain break, failed refund
  attempts, WAF blocks.

## **1.22.9 Cost posture**

- **Hosting:** Amplify Gen‑2; static build + ISR; AppSync resolvers to
  Lambdas and Aurora.
- **Storage:** Aurora for actions & configs; S3 for immutable audit.
- **No always‑on clusters.** Back‑office is user‑sparse; serverless
  fits.

## **1.22.10 Work packages (Cursor --- 4 agents)**

- **Agent A --- RBAC & Audit**: DDL, GraphQL auth directives, chain‑hash
  audit writer, S3 WORM mirror.
- **Agent B --- Moderation & Verification**: DMCA queue, studio doc
  review, asset takedown/restore, SFW gate.
- **Agent C --- Orders & Refunds**: kernel UI, Stripe refund executor,
  ledger postings, notifications.
- **Agent D --- C