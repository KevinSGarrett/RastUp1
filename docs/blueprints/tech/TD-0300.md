<!-- id: TD-0300 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 1080000-1084000 -->

                              per IP & email    CAPTCHA after soft lock
  Signup                                         **3 / min**                                   per IP            Risk‑based CAPTCHA
  Password reset                                 **3 / 10 min**                                per email         Code brute‑force guarded
  GraphQL search (*searchPeople/Studios/Work*)   **20 / min**                                  per IP (public)   Authenticated adds per‑user cap **40 / min**
  Suggestions (*suggest*)                        **10 / min**                                  per IP            Stricter; abuse‑sensitive
  Messages send                                  **60 / min**                                  per user          Per dyad sub‑cap **20 / min**
  File uploads (images)                          **10 concurrent / user**, **200 / day**       per user          50MB per file; chunked
  Checkout create                                **6 / min**                                   per user          Idempotency required
  Partner webhooks                               **N/A inbound**; **3 retries**, exp backoff   endpoint          *410* unsubscribes
  ---------------------------------------------- --------------------------------------------- ----------------- ----------------------------------------------

**R.3 Burst & whitelist**

- Soft bursts up to 2× for 5 sec on search and messages.
- Staff/admin keys have labeled higher quotas for operational tools.

**R.4 Abuse escalations**

- IP reputation + WAF rules; auto‑add to denylist on repeated abuse
  signals; appeal path documented.

**R.5 Artifacts**

- *api/docs/rate_limits.md* (canonical table)
- ops/runbooks/rate_limit_tuning.md

**R.6 Acceptance**

- Limits surfaced in headers; synthetic abuse triggers throttling; zero
  legitimate traffic blocked during canary.

## **Appendix S --- Test Data Management & Non‑Prod Data Policy**

**Purpose.** Keep non‑prod realistic and safe without leaking live PII.

**S.1 Principles**

- **No live PII** in *dev*/*stage*.
- Use **synthetic** or **masked** datasets; generate media with safe
  placeholders.

**S.2 Synthetic dataset (seed)**

- **Users:** 200 providers/studios across 6 cities, roles and price
  bands varied.
- **Media:** 1k SFW images (stock/placeholder) sized variants generated
  at build.
- **Orders:** timelines with all refund bands represented for QA.
- **Messages:** realistic threads, attachments (small images/PDFs).

**S.3 Masking rules (if cloning prod for Stage)**

- Email ⇒ [*hash+@example.com*](mailto:hash+@example.com); phone ⇒
  *XXX‑XXX‑1234*; names ⇒ consistent pseudonyms; strip addresses; purge
  EXIF.

**S.4 Secrets & keys in non‑prod**

- Distinct Stripe test keys; non‑prod mail to blackhole sink with seed
  allowlist.
- Webhooks to Stage endpoints only; never to partners.

**S.5 Artifacts**

- *ops/seed/seed_plan.md*, *ops/seed/\*.sql\|\*.ts*
- privacy/nonprod_masking.yml

**S.6 Acceptance**

- Stage behaves realistically; compliance scan finds 0 PII; seed
  rebuilds are deterministic.

## **Appendix T --- Glossary & Artifact Index (curated)**

**Purpose.** Make the plan navigable for new engineers, auditors, and
Cursor agents.

**T.1 Glossary (selected terms)**

- **Safe‑Mode (SFW):** Policy that ensures public routes never render
  NSFW assets; enforced in search, OG cards, and all public pages.
- **Outbox pattern:** DB table capturing change events for indexers/ETL
  with reliable replay.
- **Feasibility engine:** Calendar rules (buffers, blackouts, min
  duration) that gate booking slots.
- **Refund kernel:** Deterministic engine that applies time‑band rules
  for partial/full/none refunds.
- **Instant Book:** Flow allowing direct booking without back‑and‑forth;
  gated by verification/completeness.
- **Action Card:** Timeline entry representing a state transition or
  user task (e.g., upload, confirm).
- **CUPED:** Variance‑reduction method for experiments using covariates.
- **SRM:*