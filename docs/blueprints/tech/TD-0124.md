<!-- id: TD-0124 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 446400-450400 -->

y placeholders;
  *fetchpriority=\"high\"* for LCP hero; local fonts with *font-display:
  swap*.
- For RN: Hermes engine, RAM bundles, Flipper disabled in prod,
  animation worklets only where needed.

**Budget file**\
**Recommended path:** *observability/budgets/mobile.json*

*{ \"pwaFirstLoadKB\": 900, \"pwaScriptKB\": 160, \"pwaImgPolicy\":
\"webp/avif\", \"rnBundleKB\": 420 }*\

## **1.20.K Accessibility (mobile a11y)**

- **VoiceOver/TalkBack** labels on all controls; proper roles for
  tabs/lists; visible focus on PWA.
- **Touch targets ≥ 44px**; dynamic type support; prefers‑reduced‑motion
  disables parallax and spinners.
- Color contrast tokens switchable to high‑contrast palette (user pref
  from §1.19).

## **1.20.L Deep links & universal links**

- **iOS** *apple‑app‑site‑association* and **Android** Asset Links
  hosted under */.well-known/*.
- Universal link handling maps to Profile/Studio/Checkout/Message
  screens; unknown routes open in in‑app webview.

**Recommended path:**
*web/public/.well-known/apple-app-site-association*

*{\"applinks\":{\"apps\":\[\],\"details\":\[{\"appID\":\"TEAMID.com.rastup.app\",\"paths\":\[\"/p/\*\",\"/s/\*\",\"/checkout/\*\",\"/messages\*\"\]}\]}}*\

## **1.20.M CI/CD & releases (PWA + RN shells)**

- **PWA**: GitHub Actions build → deploy to Amplify Hosting/CloudFront;
  invalidation of changed paths; Lighthouse CI budget gate.
- **RN shells** *(optional)*: Expo EAS build & submit; internal test
  tracks (Play) and TestFlight; codepush‑style OTA (for JS only, not for
  policy‑sensitive features).
- **Signing & secrets** in GitHub OIDC + Secrets Manager; no long‑lived
  signing keys in repo (§1.18).

## **1.20.N Telemetry & crash reporting**

- PWA: first‑party analytics via *navigator.sendBeacon*; CWV field data
  per route; soft‑error logging.
- RN: minimal crash reporter (e.g., Sentry‑like equivalent can be added
  later) but keep SDKs lean; at launch, start with OS crash logs + our
  event pipeline.
- **Mobile event taxonomy** aligns with §1.13 (e.g., *app.install*,
  *pwa.install_prompt*, *push.opt_in*, *message.send*,
  *upload.start/success*, *booking.start/complete*).

## **1.20.O Error taxonomy (client‑safe)**

- *UPLOAD_FAILED*, *UNSUPPORTED_TYPE*, *FILE_TOO_LARGE*, *PUSH_DENIED*,
  *SAFE_MODE_BLOCKED*, *AUTH_EXPIRED*, *OFFLINE_RETRYING*.
- Each error includes user‑friendly copy and retry guidance.

## **1.20.P Test plan (device & CI)**

2086. **Installability** (PWA): manifest audit, offline home/city,
      revalidation behavior.
2087. **Messaging**: send/receive, offline queue, image upload retry.
2088. **Booking**: flow from profile → package → checkout;
      date/timezones; Apple/Google Pay via web Stripe (where
      applicable).
2089. **Push**: token registration; quiet hours; category caps; deep
      link opens correct screen.
2090. **Safe‑Mode**: previews stay SFW with Safe‑Mode ON; age‑gated
      features blocked until verified.
2091. **A11y**: VoiceOver/TalkBack; high‑contrast; reduced‑motion.
2092. **Performance**: p75 budgets met on mid‑range Android (Moto
      G‑class).
2093. **RN shells** (if used): deep links, file uploads, push, fallback
      to webview for long‑tail routes.

## **1.20.Q Work packages (Cursor 4‑agent lanes)**

- **Agent A --- PWA/UX**: service worker, manifest, offline scopes,
  Safe‑Mode toggles, upload UI.
- **Agent B --- RN Shells** (optional): Expo app, push bridge, deep
  links, secure storage, hybrid webview wrappers.
- **Agent C --- Backend/Comms**: Pinpoint/SNS setup, push templates,
  quiet hours & caps, presigned uploads, AppSync mutations.
- **Agent D --- QA/Perf**: device matrix, Lighthouse CI, CWV field
  beacons, a11y runs, perf tuning.

## **1.20.R Acceptance criteria --- mark §1.20 FINAL only when ALL true**

2098. PWA installable; offline works for defined scopes; background
      retry for uploads/messages.
2099. Push notifications delivered via Pinpoint/SNS to Web/iOS/Android
      with quiet hours & caps; deep l