<!-- id: TD-0242 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 871200-875200 -->

ring!, amountCents: Int!, taxable: Boolean = true): ID!
\@auth(role: \"owner\")*\
\
*addAvailability(studioId: ID!, dow: Int!, startMin: Int!, endMin:
Int!): ID! \@auth(role: \"owner\")*\
*addBlackout(studioId: ID!, startsAt: AWSDateTime!, endsAt:
AWSDateTime!, reason: String): ID! \@auth(role: \"owner\")*\
\
*submitStudioDoc(studioId: ID!, kind: String!, s3Key: String!): ID!
\@auth(role: \"owner\")*\
*reviewStudioDoc(docId: ID!, approve: Boolean!, note: String): Boolean!
\@auth(role: \"trust_safety\")*\
*}*\

**Auth & privacy**

- Owner‑only mutations for their own studios; **Trust & Safety** reviews
  documents.
- Precise address only visible to confirmed bookings, support, or admins
  via case scope.

## **1.19.4 Studio pricing & booking kernel (integration with §1.12 & §1.14)**

**Pricing calculator** (server function):

*base = hours \* hourly_min OR day_rate (if selected)*\
*apply min_hours (ceil to nearest 0.5h)*\
*addons = sum(addon.amount × (per_hour? hours : per_person? party_size :
1))*\
*cleaning_fee = flat*\
*subtotal = base + addons + cleaning_fee*\
*overtime = actual_time \> booked? (delta_hours \* hourly_min \*
overtime_rate_pct/100) else 0*\
*deposit = deposit_cents (hold or charge based on deposit_kind)*\
*platform_fee = % × subtotal (see §1.13)*\
*taxes = jurisdictional rules (see §1.13)*\
*total_due_at_booking = subtotal + platform_fee + taxes (excl. deposit
if hold)*\

**Time‑band refund kernel (studios)** *(aligned with §1.15)*:

- ≥72h → full refund of subtotal + platform fee refundable
- 24--72h → 50% of subtotal
- \<24h → 0%; deposit forfeiture if **nonrefundable_fee**
- Provider cancel → full refund + auto‑apology credit (configurable) +
  IB pause macro

**Atomic holds & conversion**:

- When buyer initiates studio checkout, create **calendar hold** (see
  §1.12) that includes **buffers**.
- On payment success, convert hold to booking; on failure/abandon,
  **release** holds automatically.

## **1.19.5 Calendar & availability details (studios)**

- **Templates** per DOW + **blackouts** compute open intervals.
- **Buffers** applied before/after the booking; enforces cleaning/setup
  time.
- **Overnight/multi‑day**: if *base_unit=day*, spans entire open hours;
  optional after‑hours surcharge.
- **Conflict resolution**: Studio holds/bookings live in
  *calendar.event* with *resource_id=std\_\**; conflict check is
  **resource‑scoped** (separate from people).
- **ICS**: read‑only import allowed (Phase‑2), outbound ICS file for
  confirmed bookings to host & buyer.

## **1.19.6 Media & SFW policy**

- Public studio pages only render **SFW** images; private albums may
  include sensitive behind‑the‑scenes content, accessible to buyer
  post‑booking.
- OG/sharecards use **SFW** variant (see §1.16).
- DMCA takedown (Support §1.15) hides assets and revalidates ISR within
  ≤ 10 minutes.

## **1.19.7 Verification --- Studio Lite → Verified Studio**

**Inputs** (any two required for Lite):

- Utility bill or lease showing address & name;
- Business license or tax document;
- Geo‑verified exterior photo (time‑stamped);
- Optional insurance certificate upload.

**Flow**

- Owner uploads docs (to S3 private); **Trust & Safety** reviews in
  console → approve/reject with note.
- On **approved**, set *verification=\'lite_verified\'* and
  *verified_chip=true*; **Instant Book** can be enabled
  (policy‑controlled).
- Flags: *insurance_required* toggles buyer disclosure and "Recommended
  permits/COI" notice.

## **1.19.8 Checkout specifics for studios**

- **Address disclosure.** Full address unlocks **after** booking
  confirmation; before that, show **neighborhood** and generic map pin.
- **IDV/phone** gate (optional): for high‑risk studios, require buyer
  IDV before confirming.
- **Deposit capture.** If *authorization_hold*, create Stripe auth (void
  on clean checkout); if *charge_refundable*, refund on no‑damage
  (support case closes); if *nonrefundable_fee*, non‑reversible.
- **Add‑ons** selectable at checko