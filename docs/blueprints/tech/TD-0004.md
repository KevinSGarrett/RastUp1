<!-- id: TD-0004 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 14400-18400 -->

"
  \~ \"black and white\"*, *\"H‑Town\" \~ \"Houston\"*.

**Numeric**

- Height, price, rating stored as numerics for range queries.

**Geo**

- Store *geo* as lat/lon. We support **radius** queries at MVP (polygon
  later).

**Availability**

- Bucket by ISO calendar days; daily job populates buckets for the next
  N days (N configurable; default 30).

**NSFW/Safe‑Mode**

- For **public search**, apply a query‐time filter:

  - Safe‑Mode ON → *safeModeBandMax \<= 1* (block band 2 entirely).
  - Safe‑Mode OFF for verified adults → *safeModeBandMax \<= 2* (still
    no explicit thumbnails if the product policy forbids explicit public
    imagery).

## **1.2.E Filters & UI chips**

**Global filters (people)**

- Role (tab), Location (city/radius), Date (single or range), Budget
  (min/max), Verification (ID Verified badge), Instant Book toggle,
  Rating (≥ threshold), Safe‑Mode on/off (if signed‑in and
  age‑verified), Availability (specific day), Sort (Default, Top Rated,
  Price Low→High, New).

**Role‑specific filters**

- **Models**: Height (cm/in ranges), Genres (allowlist), Experience
  (years), Travel ready (bool).
- **Photographers**: Specialties, Studio Access (has studio link),
  Turnaround (days), Insurance (bool).
- **Videographers**: Specialties, Audio capability (bool), Deliverable
  format (enum).
- **Creators**: Platforms (IG/TT/YT/X), Category, Verified social
  (bool), Min followers (range).
- **Studios**: Amenities (multi‑select), Deposit required (bool),
  Size/Capacity buckets, Natural light (bool), Parking (bool).

**Promotion chips (when feature flag on)**

- "Featured" label (above the fold) or "Boosted" (below); both must be
  visually distinct and disclose paid placement.

## **1.2.F Query grammar & API contracts**

**GraphQL (AppSync)**

*input SearchInput { surface: SearchSurface! \# PEOPLE or STUDIOS role:
RoleType \# required when surface=PEOPLE city: String! lat: Float lon:
Float radiusKm: Int = 50 date: AWSDate \# single day dateRange:
DateRangeInput \# optional alternative budgetMinCents: Int
budgetMaxCents: Int ratingMin: Float verifiedOnly: Boolean
instantBookOnly: Boolean safeMode: Boolean = true \# Role-specific
filters: model: ModelFiltersInput photographer: PhotographerFiltersInput
videographer: VideographerFiltersInput creator: CreatorFiltersInput
studios: StudiosFiltersInput sort: SearchSort = DEFAULT page: String \#
opaque cursor pageSize: Int = 20} type SearchResult { items:
\[SearchCard!\]! facets: \[Facet!\]! page: String \# next cursor} type
Query { search(input: SearchInput!): SearchResult! searchSuggest(query:
String!, surface: SearchSurface!, role: RoleType, city: String!):
\[SuggestItem!\]! savedSearches: \[SavedSearch!\]!} type Mutation {
saveSearch(name: String!, input: SearchInput!): SavedSearch!
deleteSavedSearch(id: ID!): Boolean!}*

**Cursor‑based pagination**

- Results return opaque *page* tokens (do not leak engine details).
- We cache the last N cursors per user/session (server‑side) to enable
  back/forward replay.

**Query normalization**

- City is canonicalized to a region/city id; if *lat/lon* present, we
  compute city from reverse geocoding and warn on mismatches.
- Role‑specific filters are ignored unless *role* matches the relevant
  type.

## **1.2.G Ranking & fairness**

**Base score**\
*score = w_text\*textMatch + w_geo\*geoScore + w_rep\*repScore +
w_verify\*verifyBoost + w_price\*priceFit + w_avail\*availBoost +
w_recency\*recency*

- *textMatch*: keyword/synonym features (if query text present).
- *geoScore*: distance‑decay (radius Gaussian; 0 beyond radius).
- *repScore*: f(ratingAvg, ratingCount) with Laplace smoothing to avoid
  low‑sample overweighting.
- *verifyBoost*: +X if ID Verified, +Y if Trusted Pro (BG passed).
- *priceFit*: penalty for large deviation from user budget (if set).
- *availBoost*: +Z if the requested date is in *availabilityBuckets*.
- *recency*: mild boost for recently updated profiles (helps cold
  start).

**Fairness & divers