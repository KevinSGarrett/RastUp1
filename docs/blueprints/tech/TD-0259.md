<!-- id: TD-0259 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 932400-936400 -->

ut
  success, outbox backlog, index staleness) push to CloudWatch.

- **Tracing**: AWS X‑Ray / OpenTelemetry SDK in Lambdas; trace IDs
  propagated via AppSync context.

- **Dashboards**:

  - **API** p50/p95 latency & errors; throttles; WAF blocks.
  - **Jobs**: indexer lag, DSAR queue, email send failures.
  - **Search**: hit ratio, Typesense CPU/heap, request rate.

- **Alerting**: SNS → PagerDuty/Email on: 5xx rate spikes, error budget
  burn, queue backlog thresholds, Typesense down, Aurora failover.

## **1.23.7 SLOs & error budgets**

- **Web/API availability**: 99.9% monthly; **p95 API latency** ≤ 300 ms
  (cache hits ≤ 200 ms).
- **Search**: index freshness ≤ 5 min for hot entities.
- **Checkout**: payment success pipeline success ≥ 99.5% (excl. issuer
  declines).
- **Pages**: ISR revalidation ≤ 10 min on content updates.
- **Budget policy**: when burn \> 50% mid‑window → feature freeze;
  prioritize reliability work.

## **1.23.8 Backups, DR & regional resilience**

- **Aurora**: PITR enabled; **daily snapshots** retained 35 days;
  **cross‑region snapshot copy** (us‑west‑2).

- **Typesense**: nightly **snapshot to S3** + schema + collections
  export; rebuild playbook (≤ 60 min for 1M docs).

- **S3**: versioning + lifecycle (Standard → IA → Glacier); critical
  buckets have **Object Lock** (WORM) for audit.

- **DR modes**:

  - **Cold** in us‑west‑2: infra templates ready; timed RTO ≤ 4 hours;
    RPO ≤ 15 minutes (Aurora PITR).
  - **Tabletop drills** quarterly; produce DR report & gaps.

## **1.23.9 Cost management (FinOps)**

- **Budgets & alerts** by *{env, service}* tags; anomaly detection.
- **Rightsizing**: Aurora ACU floors/ceilings per env; pause dev ACUs
  off‑hours if feasible.
- **Egress**: image transforms at edge; avoid cross‑region chatter.
- **Logs**: index only high‑value fields; set log retention by env;
  archive to Glacier after 30--90 days.
- **Search**: single Fargate node MVP; scale to 3‑node only when
  QPS/heap warrants it.

## **1.23.10 Security testing & compliance hygiene**

- **Static analysis** (TypeScript/TS ESLint rules for security);
  **secret scanning** on PR (trufflehog or GitHub Secret Scan).
- **Runtime tests**: CWE checks for SSRF/SSTI; WAF test suite.
- **Pen‑test window** before GA; fix gate.
- **Data classification** registry (Appendix A); PII tables flagged;
  access via Lake Formation/IAM.
- **Incident response**: playbooks + SEV ladder; security contacts &
  comms templates.

## **1.23.11 Runbooks (ops)**

- **Deploy rollback**: revert to previous Amplify build +
  *config.publish* rollback (§1.22) + revert DB migration (if safe).
- **Cache poison**: purge CloudFront + ISR tags; validate SFW paths.
- **Index rebuild**: restore Typesense from S3 snapshot; re‑seed via
  outbox scanner.
- **Aurora failover**: promote replica; rotate endpoints; verify write
  health.
- **Email/SMS outage**: queue messages; switch to fallback provider if
  configured.
- **DR drill**: full cold start in us‑west‑2; timed checklist.

## **1.23.12 Work packages (Cursor --- 4 agents)**

- **Agent A --- IaC & Networking**: CDK stacks, VPC, WAF, Secrets/KMS,
  ECS Typesense, Aurora.
- **Agent B --- CI/CD**: GitHub Actions workflows, migrations runner,
  canary deploys, feature flags.
- **Agent C --- Observability & SRE**: dashboards, alerts, tracing,
  SLO/error budget tooling, runbooks.
- **Agent D --- DR & FinOps**: backups/snapshots, cross‑region plan,
  cost tags/budgets, anomaly alerts.

## **1.23.13 Tests (representative)**

4352. **Infra conformance**: CDK Aspects ensure encryption, logging, and
      tags; fail build on violations.
4353. **Canary deploy**: automated rollback on 5xx spike or error budget
      burn.
4354. **Migration safety**: additive change succeeds; backward/forward
      compatibility verified in Stage; failed migration halts deploy.
4355. **WAF e2e**: known attack vectors blocked; rate‑limit works.
4356. **Tracing**: end‑to‑end trace from web → AppSync → Lambda → Auror