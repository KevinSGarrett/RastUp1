<!-- id: TD-0188 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 676800-680800 -->

nd smallint not null default 0,*\
*status text not null default \'active\' \-- active\|blocked*\
*);*\
\
*commit;*\

**Notes**\
• Licensing multipliers are defaults; SPs can override in
*service_profile.license_policy* (e.g., fixed adders).\
• Availability rules are separate from **blackouts** (handled globally
in §1.24 for studios and here via booking window + rules).

## **1.7.4 GraphQL API (AppSync)**

**Schema ---** ***api/schema/profile.graphql*** **(selected)**

*enum Visibility { PUBLIC UNLISTED PRIVATE }*\
*enum RoleCode { MODEL PHOTOGRAPHER VIDEOGRAPHER CREATOR MUA STYLIST }*\
\
*type UserProfile {*\
*userId: ID!*\
*handle: String!*\
*displayName: String!*\
*bio: String*\
*city: String, region: String, country: String*\
*languages: \[String!\]!*\
*genres: \[String!\]!*\
*avatarUrl: AWSURL, coverUrl: AWSURL*\
*pronouns: String*\
*websiteUrl: AWSURL*\
*socialLinks: AWSJSON*\
*visibility: Visibility!*\
*completenessPct: Int!*\
*}*\
\
*type RoleProfile {*\
*id: ID!*\
*role: RoleCode!*\
*tagline: String*\
*experienceYears: Int*\
*genres: \[String!\]!*\
*city: String, region: String, country: String*\
*travelRadiusMi: Float*\
*status: String!*\
*}*\
\
*type ServiceProfile {*\
*id: ID!*\
*roleProfileId: ID!*\
*title: String!*\
*summary: String!*\
*status: String!*\
*ibAllowed: Boolean!*\
*minHours: Float!*\
*bookingWindowDays: Int!*\
*leadTimeHours: Int!*\
*cancellationPolicy: String!*\
*travelPricing: AWSJSON*\
*licensePolicy: AWSJSON*\
*packages: \[Package!\]!*\
*extras: \[Extra!\]!*\
*}*\
\
*type Package { id: ID!, title: String!, description: String,
durationMinutes: Int!, priceCents: Int!, deliverables: \[String!\],
maxPeople: Int, includesStudio: Boolean, ordinal: Int!, active: Boolean!
}*\
*type Extra { id: ID!, title: String!, description: String, unit:
String!, unitCents: Int!, maxQty: Int, ordinal: Int!, active: Boolean!
}*\
*type AvailabilityRule { id: ID!, weekdayMask: Int!, startLocal:
AWSJSON!, endLocal: AWSJSON!, timezone: String!, effectiveFrom:
AWSDate!, effectiveTo: AWSDate }*\
\
*input UpsertUserProfileInput { handle: String!, displayName: String!,
bio: String, city: String, region: String, country: String, languages:
\[String!\], genres: \[String!\], pronouns: String, websiteUrl: AWSURL,
socialLinks: AWSJSON, visibility: Visibility }*\
*input CreateRoleProfileInput { role: RoleCode!, tagline: String,
experienceYears: Int, genres: \[String!\], city: String, region: String,
country: String, travelRadiusMi: Float }*\
*input CreateServiceProfileInput { roleProfileId: ID!, title: String!,
summary: String!, minHours: Float, bookingWindowDays: Int,
leadTimeHours: Int, cancellationPolicy: String, travelPricing: AWSJSON,
licensePolicy: AWSJSON }*\
*input UpsertPackageInput { serviceProfileId: ID!, id: ID, title:
String!, description: String, durationMinutes: Int!, priceCents: Int!,
deliverables: \[String!\], maxPeople: Int, includesStudio: Boolean,
ordinal: Int, active: Boolean }*\
*input UpsertExtraInput { serviceProfileId: ID!, id: ID, title: String!,
description: String, unit: String!, unitCents: Int!, maxQty: Int,
ordinal: Int, active: Boolean }*\
*input UpsertAvailabilityRuleInput { roleProfileId: ID!, id: ID,
weekdayMask: Int!, startLocal: AWSJSON!, endLocal: AWSJSON!, timezone:
String!, effectiveFrom: AWSDate, effectiveTo: AWSDate }*\
*input PublishServiceProfileInput { id: ID! }*\
\
*type Query {*\
*myProfile: UserProfile!*\
*myRoleProfiles: \[RoleProfile!\]!*\
*myServiceProfiles(roleProfileId: ID!): \[ServiceProfile!\]!*\
*serviceProfile(id: ID!): ServiceProfile*\
*}*\
\
*type Mutation {*\
*upsertUserProfile(input: UpsertUserProfileInput!): UserProfile!*\
*createRoleProfile(input: CreateRoleProfileInput!): ID!*\
*createServiceProfile(input: CreateServiceProfileInput!): ID!*\
*upsertPackage(input: UpsertPackageInput!): ID!*\
*upsertExtra(input: UpsertExtraInput!): ID!*\
*upsertAvailabilityRule(input: UpsertAvailabilityRuleInput!): ID!*\
*publishServiceProfile(input: PublishServiceProfileInput!): Boolean!*\