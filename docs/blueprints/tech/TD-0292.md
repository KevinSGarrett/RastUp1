<!-- id: TD-0292 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 1051200-1055200 -->

ceptance:** secret scan finds 0 PII in logs; traceability across
  services works.

➡️ **Fully written as Appendix M below.**

### **P0‑5. Disaster Recovery Matrix (RTO/RPO per subsystem)**

- **Add:** timed restore steps for Aurora/S3/Typesense, cross‑region
  posture, DNS failover, quarterly drill script.
- **Artifacts:** *ops/dr_plan.md*, *ops/runbooks/dr_restore.md*.
- **Acceptance:** last DR drill met **RPO ≤ 15m** and **RTO ≤ 60m**
  end‑to‑end.

*(We outlined DR earlier; this appendix pins exact timings and
commands.)*

### **P1‑6. Data Governance: Retention, Classification, Masking, Lineage**

- **Add:** per‑table retention schedule, PII classification map, Stage
  masking rules, lineage from app→search→warehouse.
- **Artifacts:** *data/governance/catalog.yaml*,
  *data/retention_policies.md*.
- **Acceptance:** automated enforcement jobs run; Stage has no live PII.

### **P1‑7. Deliverability Program (Email + A2P‑10DLC)**

- **Add:** registration checklist, warmup ladder, complaint/bounce
  suppression, DMARC aggregate review cadence.
- **Artifacts:** *messaging/deliverability_playbook.md*,
  *messaging/10dlc_checklist.md*.
- **Acceptance:** inbox placement verified on seed list; carrier
  registrations approved.

### **P1‑8. Legal/Policy Ops**

- **Add:** ToS/Privacy consent capture model, cookie consent variants,
  community guidelines enforcement ladder, law‑enforcement request SOP.
- **Artifacts:** *legal/consent_model.md*,
  *policy/enforcement_ladder.md*, *legal/law_enforcement_sop.md*.
- **Acceptance:** consent evidence is queryable; enforcement actions
  auditable.

### **P1‑9. Access Management & Staff Device Policy**

- **Add:** SSO groups → RBAC mapping, joiner/mover/leaver SOP, device
  posture (disk encryption, screen lock), privileged session recording
  for admin console.
- **Artifacts:** *security/iam_matrix.md*, *security/jml_sop.md*.
- **Acceptance:** offboarding removes access within SLA; admin actions
  trace to a person.

### **P2‑10. Data Quality Rules (domain constraints)**

- **Add:** explicit FK/unique/check constraints for domain rules (e.g.,
  price bands, refund band monotonicity), validation SQL.
- **Artifacts:** *db/constraints.sql*, *db/quality_tests.sql*.
- **Acceptance:** migrations enforce rules; nightly job flags violations
  = 0.

### **P2‑11. Synthetic Monitoring (user flows)**

- **Add:** headless checks from multiple regions for login, search,
  checkout, messages; alert routes.
- **Artifacts:** *synthetics/\*.yml*,
  *observability/alarms/synthetics.yml*.
- **Acceptance:** failures page on‑call; MTTR within target.

### **P2‑12. Vendor/Sub‑processor Register & SLAs**

- **Add:** list all vendors (email/SMS, Stripe, geo/IP, moderation),
  data categories processed, DPA links, outage playbooks.
- **Artifacts:** *legal/subprocessors.md*, *ops/vendor_sla_watch.md*.
- **Acceptance:** SLAs tracked; failover/fallback defined where
  feasible.

Below are the **fully written appendices** for the top four items so you
can paste them into your master document **as‑is**.

## **Appendix J --- Configuration & Flags Registry (paste‑ready)**

**Purpose.** Single source of truth for environment variables, secrets,
feature flags, and their safe defaults.

**J.1 Structure**

- **Registry file:** *ops/config/registry.md*
- **Columns:** *Key*, *Service*, *Env* (*dev\|stage\|prod*), *Type*,
  *Default*, *Allowed values*, *Secret store*, *Owner*, *Rotation*,
  *Notes*.

**J.2 Canonical entries (representative)**

- *APP_ENV* --- web/api --- all --- enum --- *dev* ---
  *{dev,stage,prod}* --- plain --- Platform --- n/a --- controls
  telemetry sampling.
- *GRAPHQL_URL* --- web --- dev/stage --- URL --- (env‑specific) ---
  must be HTTPS in prod --- plain --- Platform --- n/a.
- *JWT_AUDIENCE* --- api --- all --- string --- *rastup-app* --- fixed
  --- plain --- Security --- n/a.
- *KMS_KEY_APP* --- api --- prod --- ARN --- none --- required --- KMS
  --- Security --- yearly --- app‑level encryption.
- *