<!-- id: TD-0164 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 590400-594400 -->

rs.md* --- event mapping, idempotency,
  retries.
- *product/acceptance/booking-scenarios.md* --- enumerated scenarios
  (below).

## **1.3.16 Test plan (representative, not exhaustive)**

2696. **IB happy path**: rule allows → confirm → charge → calendar block
      → chat opens → complete → payout after window.

NonTechBlueprint

2697. **RTB**: request → provider accepts → charge → confirm; request
      auto‑expires if no response within SLA.

NonTechBlueprint

2698. **Counter‑offer**: provider counters → buyer accepts; totals
      recalc; prior request invalidated.
2699. **Smart Invite**: 1 brief → N recipients; award one or multiple;
      non‑awarded invites close.

NonTechBlueprint

2700. **Contracts**: pack generated, e‑signed, stored; visible in thread
      and Admin.

NonTechBlueprint

2701. **Completion**: time‑based vs milestone‑based; auto‑release after
      window if no dispute.

NonTechBlueprint

2702. **Cancellation matrix**: refunds computed per thresholds; provider
      cancel penalty applied; reschedule allowed before window.
2703. **Disputes**: open → evidence → Admin resolution; outcomes map to
      partial/full refund or payout.
2704. **Stripe webhooks**: success/failure, dispute created/closed,
      refund; idempotency proven.
2705. **Risk**: new provider payouts delayed; 3DS enforced where
      required; ACH pending state handled.
2706. **SEO/privacy**: no sensitive data indexed; SFW surfaces only.

## **1.3.17 Acceptance criteria --- mark §1.3 FINAL only when ALL true**

2707. IB, RTB, and Smart Invite flows work end‑to‑end with calendar
      blocks and chat threads.

NonTechBlueprint

2708. Checkout attaches and signs the correct **contract pack**;
      documents are retained with the order.

NonTechBlueprint

2709. Funds are charged and held on platform balance; **release/payout**
      logic respects completion + review windows; tipping supported.

NonTechBlueprint

2710. Cancellation & reschedule policies compute correct
      refunds/penalties; provider cancellations penalize reputation and
      (if repeated) fees.
2711. Disputes route to Admin casework with evidence; outcomes apply
      refunds/payouts; Stripe chargebacks are tracked.
2712. Webhooks are idempotent; retries safe; audit trails complete.
2713. Costs remain within launch posture (single PSP; serverless infra;
      no third‑party workflow SaaS).

# **§1.3 --- Booking, Payments & Disputes --- Full Technical Spec**

**Purpose.** Implement fast, trustworthy booking with Instant Book (IB)
and Request‑to‑Book (RTB), private **Smart Invite** to multiple
profiles, escrowed payments, transparent cancellation, and a fair,
auditable dispute process. This section translates your non‑technical
scope (Service Profile, Packages, Extras, Usage License, IB/Smart
Invite, checkout contracts, escrow, payout timing, and disputes) into
build‑ready detail.

NonTechBlueprint

## **1.3.1 Scope confirmation (from non‑technical → technical)**

- **Key concepts & objects**: Service Profile (SP), Packages, Extras,
  Usage License, Instant Book, Smart Invite, Auto‑accept rules.

NonTechBlueprint

- **Booking modes**: Instant Book; Request‑to‑Book (+ Accept / Decline /
  Counter); Smart Invite (multi‑recipient private brief; buyer can award
  one or more hires).

NonTechBlueprint

- **Checkout & payment flow**: select package/extras/license; pick
  date/time & location; dynamic travel fees; **contract pack
  auto‑attached** (Booking Agreement, Usage License, Model Release for
  model hires, Content Promotion Terms for creators); e‑sign at
  checkout; escrow notice; pay & confirm; calendars block; chat opens.

NonTechBlueprint

- **Escrow & payout**: charge buyer → hold funds ("escrow") → completion
  signals (time‑based vs deliverable‑based) → grace/review window →
  auto‑release if no dispute; new‑provider risk delays first payouts;
  ACH & card support; tipping after completion.

NonTechBlueprint

## **1.3.2 Architecture & cost posture**

- **Fronten