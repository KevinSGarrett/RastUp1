<!-- id: TD-0317 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 1141200-1145200 -->

 (SEV Ladder & Comms Templates)**

**Purpose.** Standardize response and communication.

**Z.1 Severity ladder**

- **SEV1**: outage/payments broken; **SEV2**: major impact; **SEV3**:
  partial; **SEV4**: minor.

**Z.2 Roles**

- Incident Commander, Ops, Comms, Scribe; 30‑min updates for SEV1/2.

**Z.3 Templates**

- Slack/Status page/email comms; postmortem template with action items &
  owners.

**Z.4 Acceptance**

- Last drill completed within targets; templates in repo; paging routes
  tested.

# **Appendix AA --- Schema Migration & Data Backfill Playbook**

**Purpose.** Zero‑downtime migrations and safe rollbacks.

**AA.1 Expand/contract**

- Add nullable columns → dual‑write/read → backfill → cutover → drop
  old.

**AA.2 Tools**

- *db/migrations/\*.sql*, *ops/backfill/\*.ts* (idempotent).

**AA.3 Acceptance**

- Migration rehearsed in Stage with prod‑sized data; rollback tested.

# **Appendix AB --- QA Strategy & Test Matrix**

**Purpose.** Ensure coverage of critical business flows.

**AB.1 Test types**

- Unit, contract (GraphQL), E2E (Playwright), performance, security,
  accessibility, smoke.

**AB.2 Critical paths**

- Signup→verify, Profile edit, Search→view→checkout, Messaging with
  attachments, Refund, DSAR.

**AB.3 Gates**

- Coverage thresholds: **80% lines**, **95% functions on core
  services**; smoke must pass before deploy.

**AB.4 Artifacts**

- *qa/test_matrix.xlsx*, *.github/workflows/ci.yml* (gates),
  *qa/release_checklist.md*.

**AB.5 Acceptance**

- All gates green in Stage; release checklist signed.

# **Appendix AC --- FinOps & Cost Guardrails**

**Purpose.** Keep MVP costs low with elastic scaling.

**AC.1 Budgets & alerts**

- AWS Budgets: monthly targets for S3, Lambda, Aurora, CloudFront,
  Typesense.
- Alert at **70/90/100%** spend; anomaly detection on \> 2× daily
  baseline.

**AC.2 Unit economics**

- Track **\$/successful booking** and **\$/MAU**; dashboard derived from
  costs + analytics.

**AC.3 Rightsizing**

- TTLs and storage classes for S3; Dynamo TTLs; Aurora v2 autoscaling
  min/max set.

**AC.4 Acceptance**

- Budgets configured; alerts firing to on‑call; dashboard visible.

# **Appendix AD --- Cursor Agent Orchestration (4 Agents, Autopilot Build)**

**Purpose.** Make multi‑agent development deterministic, safe, and
efficient.

**AD.1 Roles**

- **Agent A (Backend/API):** GraphQL schema, Lambdas, migrations, tests.
- **Agent B (Frontend/UX):** Next.js pages/components, a11y, SEO.
- **Agent C (Infra/Ops):** CDK stacks, CI/CD, observability.
- **Agent D (Quality/SRE):** tests, dashboards, perf/chaos, RTM updates.

**AD.2 Guardrails**

- PR size caps; one agent per directory; CODEOWNERS; contract tests
  auto‑run on schema change.
- "Design‑first" protocol: edit schema/contract → generate stubs →
  implement.

**AD.3 Prompts & checklists**

- Each agent runs with a pinned prompt that references: RTM, appendices,
  acceptance criteria, and repository paths.

**AD.4 Acceptance**

- No cross‑agent drift; all PRs reference a **ReqID** from RTM; CI
  contract tests green.

# **Appendix V --- Performance, Load & Capacity (deep version)**

## **V.1 Budgets (exact numbers)**

**Web (mobile focus, p75 unless noted)**

- LCP ≤ **2500 ms**, INP ≤ **200 ms**, CLS ≤ **0.10**
- TTFB ≤ **400 ms** (edge cache hit ≤ **120 ms**, miss ≤ **400 ms**)
- JS initial ≤ **150 KB** gzip; CSS ≤ **70 KB**; images above-the-fold ≤
  **250 KB**

**GraphQL/API (p95)**

- Cached ≤ **200 ms**, Miss ≤ **450 ms**, Error rate ≤ **0.5%**

**Search (Typesense)**

- Median **\< 50 ms**, p95 **\< 150 ms**, Index freshness **≤ 5 min**

**Checkout**

- Server processing (excl. 3DS challenge) ≤ **600 ms** p95

## **V.2 k6 Scenarios (copy to** ***perf/k6/*****)**

***perf/k6/search.js***

*import http from \'k6/http\';*\
*import { check, sleep } from \'k6\';*\
*import { Trend, Rate } from \'k6/metrics\';*\
\
*export let SearchLat = new Trend(\'search_latency_ms\');*\
*export let SearchOK = new Rate(\'search_ok\');*\
\
*exp