<!-- id: TD-0084 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 302400-306400 -->

ing counter.
- *RefundIssued* → entitlements revoked; status *refunded*.

### **1.14.8.2 Subscription lifecycle**

- *trialing* (if enabled) → *active* on first invoice; *past_due* →
  *canceled* after dunning; *paused* (manual) halts entitlement updates;
  *canceled* allows access until *current_period_end*.

## **1.14.9 Moderation, DMCA & safety runbooks**

### **1.14.9.1 Moderation pipeline**

- **Text**: profanity/toxicity + PII regex (emails, phones, socials).
  Confidence thresholds tuned; soft‑block with inline redaction + appeal
  path.
- **Media**: Rekognition (nudity/adult), custom NSFW model optional;
  **band 0/1/2** policy as earlier.
- **Escalation**: 3 strikes in 30 days → auto "under review" (publishing
  paused) pending T&S decision.

### **1.14.9.2 DMCA flow (Admin console)**

1561. Intake claim → **hide** content (previews & links), notify
      creator.
1562. Creator may **counter** within window; if no counter, content
      stays removed; if counter, re‑publish unless legal hold.
1563. Evidence pack: manifest JSON, file SHA‑256, timestamps, access
      logs; export PDF.

**Timers** and **email templates** pre‑authored (§1.10).

## **1.14.10 Pricing policy, limits & abuse protections**

- **Price ranges** (configurable):

  - Subscriptions: \$2--\$50/month
  - PPV: \$1--\$200
  - Requests: \$5--\$1,000
  - Tips: \$1--\$500 per click (daily cumulative cap per user)

- **Rate limits**:

  - Max 5 PPV purchases/min per user, 20/day; Tips ≤ 10/min; Requests ≤
    3 open per creator per fan.

- **Fraud**: velocity + device/IP risk signals (tie into §1.6 risk
  score); auto‑pause on thresholds.

## **1.14.11 Notifications & templates (MJML snippets)**

- ***fansub_sub_started***: subject "You're subscribed to {{creator}}";
  body includes period dates, manage link.
- ***fansub_invoice_failed***: "Payment issue for {{creator}}---update
  your card".
- ***fansub_ppv_unlocked***: "You unlocked {{title}} by {{creator}}".
- ***fansub_request_quote***: to buyer with pay CTA; to creator with
  accepted notice.
- ***fansub_request_delivered***: approve/revise buttons.
- ***fansub_tip_received***: to creator with amount.

All respect quiet hours; security/legal always deliver.

## **1.14.12 GraphQL SDL --- extended (selected)**

*enum FansubOrderKind { TIP PPV REQUEST }*\
*enum FansubRequestStatus { QUOTED ACCEPTED PAID DELIVERED APPROVED
REVISION_REQUESTED REFUNDED DISPUTED CLOSED }*\
*enum FansubNSFWBand { SAFE BLUR BLOCK }*\
\
*type FansubOrder {*\
*orderId: ID! kind: FansubOrderKind!*\
*amountCents: Int! feeCents: Int! taxCents: Int! currency: String!*\
*status: String! createdAt: AWSDateTime!*\
*}*\
\
*type PPVAccess { ppvId: ID!, purchasedAt: AWSDateTime! }*\
\
*type Mutation {*\
*\# Admin-ish helpers for creators:*\
*setFansubPrices(priceMonthCents: Int!): FansubCreator!*\
*publishPPV(input: PPVInput!): PPVPost!*\
*unpublishPPV(ppvId: ID!): Boolean!*\
\
*\# Purchases:*\
*buyPPV(ppvId: ID!): FansubOrder! \# returns order + client secret if
needed*\
*tip(creatorId: ID!, amountCents: Int!): FansubOrder!*\
*subscribe(creatorId: ID!): SubscriptionStatus!*\
\
*\# Requests flow:*\
*requestQuote(creatorId: ID!, title: String!, brief: String!,
priceCents: Int!): ID!*\
*acceptQuote(requestId: ID!): FansubOrder!*\
*deliverRequest(requestId: ID!, proofManifest: ManifestInput!):
Boolean!*\
*approveRequest(requestId: ID!, finalManifest: ManifestInput!):
Boolean!*\
*requestRevision(requestId: ID!, note: String!): Boolean!*\
*}*\

Server injects idempotency keys; returns PaymentIntent client secrets
where applicable.

## **1.14.13 Telemetry & ops dashboards (NRT)**

- **NRT views** (≤10 min): creator earnings today/MTD, failed invoices
  by creator, active subs, churn last 7 days, request backlog.
- **Gold KPIs**: conversion (profile→subscribe), PPV unlock CTR, request
  completion rate, refund/complaint rate, average tip, ARPU.
- **Alerts**: spike in invoice failures, refund bursts, DMCA volume,
  NSFW band‑2 misclassifications