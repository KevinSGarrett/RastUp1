<!-- id: TD-0179 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 644400-648400 -->

*, *webhookLog\[\]*,
  *decision*, *evidenceRef\[\]*, *expiresAt* (TTL for PII), *appealRef*.

2937. ModerationItem

- **PK**=*ITEM#{mediaId\|messageId}*, **SK**=*MOD#{modId}*
- *kind(media\|message)*, *signals* (labels/scores), *ruleHits\[\]*,
  *finalDecision(allow\|blur\|block\|remove)*, *safeModeRequired*,
  *auditId*.

2940. SafetyReport

- **PK**=*REPORT#{reportId}*, **SK**=*CASE*
- *accusedUserId*, *accuserUserId*, *allegation*, *linkedItems\[\]*,
  *severity*, *triageState*, *SLA*, *outcome*, *strikeDelta*.

2943. StrikeLedger

- **PK**=*USER#{userId}*, **SK**=*STRIKE#{strikeId}*
- *policy*, *points*, *decayAt*,
  *actionsApplied(pauses\|listingHide\|contactBlock)*.

2946. *EvidenceBlob* (S3‑backed manifest)

- **PK**=*EVIDENCE#{evidenceId}*
- *s3Uri* (redacted), *sha256*, *piiMap*, *legalHold(bool)*.

Evidence & immutable logging are emphasized repeatedly in your
implementation notes. We store hashes, never edit originals, and honor
legal holds.

NonTechBlueprint_Part3

### **1.5.D GraphQL schema (AppSync)**

**Types (abridged but complete for MVP flows)**

*type TrustFlags {*\
*is18PlusAttested: Boolean!*\
*idvStatus: IDVStatus!*\
*trustedProStatus: BackgroundStatus!*\
*socialVerified: SocialVerified*\
*studioVerified: Boolean!*\
*safeModePreference: SafeModePref!*\
*instantBookEligible: Boolean!*\
*nsfwToggleEligible: Boolean!*\
*payoutsEligible: Boolean!*\
*riskScore: Float!*\
*strikesActive: Int!*\
*}*\
\
*enum IDVStatus { NONE PENDING PASSED FAILED EXPIRED }*\
*enum BackgroundStatus { NONE PENDING PASSED FAILED EXPIRED }*\
*enum SafeModePref { DEFAULT_ON OFF }*\
\
*type StartIdvSessionResult { sessionClientSecret: String!, caseId: ID!
}*\
*type StartBgCheckResult { vendorUrl: AWSURL!, caseId: ID! }*\
\
*type Mutation {*\
*attestAge18Plus(consent: Boolean!): TrustFlags
\@aws_cognito_user_pools*\
\
*startIdvSession(returnUrl: AWSURL): StartIdvSessionResult
\@aws_cognito_user_pools*\
*\# webhook -\> completeIdvSession is IAM-protected Lambda resolver*\
\
*startBackgroundCheck(package: String!): StartBgCheckResult
\@aws_cognito_user_pools*\
\
*setSafeModePreference(pref: SafeModePref!): TrustFlags
\@aws_cognito_user_pools*\
\
*reportUser(targetUserId: ID!, reason: String!, evidenceRefs: \[ID!\]):
ID \@aws_cognito_user_pools*\
*reportContent(targetId: ID!, kind: String!, reason: String!,
evidenceRefs: \[ID!\]): ID \@aws_cognito_user_pools*\
\
*appeal(caseId: ID!, message: String!, evidenceRefs: \[ID!\]): ID
\@aws_cognito_user_pools*\
*}*\
\
*type Query {*\
*myTrustFlags: TrustFlags \@aws_cognito_user_pools*\
*}*\

**Admin (separate Admin AppSync API or IAM‑guarded namespace)**

- *listCases(state, type)*, *decideCase(caseId, decision)*,
  *applyStrike(userId, policy, points)*, *pauseUser*, *unpauseUser*,
  *exportEvidence(reportId)* with **immutable audit logs** and
  **two‑step confirmations** per your implementation rules.

NonTechBlueprint_Part3

### **1.5.E State machines (AWS Step Functions)**

**IDV flow**\
*Start → OpenVendorSession → WaitForWebhook → ValidateResult →
UpdateTrustFlags → (Unlock: payoutsEligible, nsfwToggleEligible,
instantBookEligible) → NotifyUser*

- **Unlocks are exactly per your plan** (IDV gates payouts/NSFW/IB).

NonTechBlueprint

**Background check (Trusted Pro)**\
*Start → CollectDisclosure/Consent → VendorInvite (Checkr) →
WaitForWebhook → Adjudication (pass\|fail\|manual) → UpdateFlags
(trustedProStatus) → Notify + Badge*

**Moderation (media)**\
*Ingest → Tier-0 classify → If uncertain/highReach → Tier-1 vendor →
Derive Decision (allow\|blur\|block) → Write ModerationItem → Update
media.safeModeRequired → If block → queue human review*

**Reports/Appeals**\
*ReportOpened → Auto‑triage (severity heuristics) → Queue → Human
decision → Apply actions (strikes/pauses) → Evidence snapshot → Notify +
AppealWindow → (if appeal) SecondReview → Finalize & log*

### **1.5.F Enforcement & risk**

**Strike ladder & actions**

- Strike points by policy; **decay** after X days; **thresholds**
  tri