<!-- id: TD-0150 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 540000-544000 -->

.com/p/\${p.handle}\`,*\
*\"address\": { \"@type\":\"PostalAddress\", \"addressLocality\":
p.city, \"addressRegion\": p.region, \"addressCountry\": p.country }*\
*};*\
*return \<script type=\"application/ld+json\"
dangerouslySetInnerHTML={{\_\_html: JSON.stringify(data)}} /\>;*\
*}*\

### **B) Place (Studio listing, approximate coordinates only)**

**Recommended path:** *web/seo/jsonld-place.tsx*\
*(uses approx lat/lon; never exact street address pre‑booking; see
§1.24)*

### **C) BreadcrumbList for directories**

**Recommended path:** *web/seo/jsonld-breadcrumbs.tsx*

## **1.27.7 SSR/ISR build plan**

- **Directories (City/Role/Genre):** ISR with *revalidate: 300--900s*
  depending on city activity; pre‑render top 200 city/role combos.
- **Profiles/Studios:** SSR with *revalidate: 300s*; if completeness \<
  threshold or NSFW band \>= 2, render **SFW gate + noindex**.
- **Guides:** pure static builds, trigger rebuild on edit (CMS).

**Fallbacks:** bots see server‑rendered paginated HTML (not infinite
scroll) with *rel=\"next/prev\"* pagination links.

## **1.27.8 Pagination & faceted navigation**

- **Pagination:** use *?page=n*; include *rel=\"next\"*/*rel=\"prev\"*;
  noindex pages beyond a reasonable depth (e.g., *page \> 20* →
  *noindex,follow*).
- **Facets:** for UX we keep ANY/ALL filters (genres, amenities, price)
  but we **noindex** any URL with *any=*/*all=*; canonical points to
  base listing with the same city/role.
- **Sorts:** *sort* is canonically preserved; others are stripped.

## **1.27.9 Internal linking & content hubs**

- **City pages** surface top roles/genres and **editorial guides**
  ("Best natural light studios in Houston").
- **Profile cross‑links:** "Works with" chips link to complementary
  roles in the same city (controlled set only).
- **Studios:** "Pair with Talent" links (already in §1.24) deep‑link
  into People search with date/city preserved.

## **1.27.10 Media, OpenGraph & Twitter cards**

- **Profile OG image:** server‑side composited SFW headshot + name +
  city.
- **Studio OG image:** first SFW gallery image + title + city.
- **Guides OG:** hero image + title.
- All OG images render via an edge image function (Next Image Response)
  and cached.

**Recommended path:**
*web/app/(public)/p/\[handle\]/opengraph-image.tsx*

## **1.27.11 Core Web Vitals budgets & enforcements**

**Budgets (mobile P75):** LCP ≤ 2.5s, INP ≤ 200ms, CLS ≤ 0.1.\
**Build gate:** Lighthouse CI must pass budgets on key templates (home,
city listing, profile, studio).\
**Runtime beacons:** send CWV field data via *web-vitals* to our
analytics (§1.13).\
**Tactics:**

- Preconnect DNS for Typesense/AppSync endpoints; lazyload below‑fold
  images; use *fetchpriority=\"high\"* for LCP media; defer non‑critical
  JS; no third‑party tag bloat.

**Recommended path:** *observability/budgets/web.json*

*{\"lcpMs\": 2500, \"inpMs\": 200, \"cls\": 0.1, \"maxScriptKb\": 160,
\"maxFirstLoadKb\": 900}*\

## **1.27.12 Error & redirect policy**

- **4xx:** custom 404 with search module; return *404* (not soft).

- **5xx:** friendly error page; *Retry-After* when under maintenance.

- Redirects:

  - Legacy slugs preserved via *301*; maintain a *slug_redirects* table
    (source → target).
  - Force canonical host (*www* vs apex) and HTTPS.
  - Trailing slashes normalized.

**Recommended path:** *web/next.config.mjs* (excerpt)

*async redirects() { return \[*\
*{ source: \'/profile/:handle\', destination: \'/p/:handle\', permanent:
true },*\
*{ source: \'/studio/:slug\', destination: \'/s/:slug\', permanent: true
}*\
*\];}*\

## **1.27.13 Safe‑Mode & SFW gating (SEO)**

- **Indexable pages must be Safe‑Mode clean**: if any visible component
  would render NSFW previews, return *noindex,nofollow*.
- **Profile/studio completeness:** below threshold → **noindex** to
  avoid thin content.
- **Fan‑Sub (paid)**: *noindex* on all paid content and collection
  pages; preview pages (teasers) are SFW.

## **1.27.14 Analytics & monitoring**

-