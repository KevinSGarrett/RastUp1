<!-- id: TD-0057 | source: ProjectPlans\TechnicalDevelopmentPlan.odt | range: 205200-209200 -->

efault false,*\
*verification_json jsonb not null default \'{}\'::jsonb, \-- docs
summary (no images)*\
*deposit_required boolean not null default false,*\
*deposit_auth_cents int not null default 0, \-- default auth amount (can
be 0)*\
*capacity_people int not null default 0,*\
*size_sqft int, \-- optional*\
*house_rules_json jsonb not null default \'\[\]\'::jsonb,*\
*amenities_json jsonb not null default \'\[\]\'::jsonb, \-- string\[\]
canonical keys*\
*insurance_confirmed boolean not null default false,*\
*rating_avg numeric(3,2) not null default 0.00,*\
*rating_count int not null default 0,*\
*price_from_cents int not null default 0, \-- normalized floor*\
*currency text not null default \'USD\',*\
*created_at timestamptz not null default now(),*\
*updated_at timestamptz not null default now()*\
*);*\
\
*\-- Pricing schedules (hourly, slot, or day rates with peak/off-peak)*\
*create type studio_rate_kind as enum (\'hourly\',\'slot\',\'day\');*\
\
*create table studio_rate (*\
*rate_id text primary key, \-- srt\_\...*\
*studio_id text not null references studio(studio_id) on delete
cascade,*\
*kind studio_rate_kind not null,*\
*name text not null, \-- \"Weekday Hourly\", \"Weekend Slot\"*\
*dow int\[\] not null, \-- 0=Sun..6=Sat*\
*start_local time not null, \-- for \'hourly\' window or slot start*\
*end_local time not null, \-- for \'hourly\' window or slot end*\
*slot_minutes int, \-- required for \'slot\'*\
*price_cents int not null, \-- per hour/slot/day depending on kind*\
*overtime_cents_per_30m int not null default 0,*\
*min_booking_minutes int not null default 60,*\
*max_booking_minutes int, \-- optional cap*\
*tax_inclusive boolean not null default false, \-- rarely true; standard
is false*\
*active boolean not null default true,*\
*created_at timestamptz not null default now()*\
*);*\
\
*\-- Blackouts and buffers*\
*create table studio_blackout (*\
*blackout_id text primary key, \-- sbo\_\...*\
*studio_id text not null references studio(studio_id) on delete
cascade,*\
*start_at timestamptz not null,*\
*end_at timestamptz not null,*\
*reason text*\
*);*\
\
*\-- Default buffers & cleanup windows (applies to all bookings unless
overridden)*\
*create table studio_policy (*\
*studio_id text primary key references studio(studio_id) on delete
cascade,*\
*buffer_before_min int not null default 30,*\
*buffer_after_min int not null default 30,*\
*cleaning_min int not null default 0,*\
*cancellation_policy jsonb not null default \'{}\'::jsonb \-- bands like
ยง1.3.L*\
*);*\
\
*\-- Media (previews only; S3 keys; NSFW band)*\
*create table studio_media (*\
*media_id text primary key, \-- smd\_\...*\
*studio_id text not null references studio(studio_id) on delete
cascade,*\
*kind text not null check (kind in (\'image\',\'video\')),*\
*s3_key text not null,*\
*width int,*\
*height int,*\
*nsfw_band int not null default 0, \-- 0 allow, 1 blur, 2 block*\
*position int not null default 0,*\
*created_at timestamptz not null default now()*\
*);*\
*create index on studio_media(studio_id, position);*\
\
*\-- Studio verification audit trail*\
*create table studio_verification_audit (*\
*sva_id text primary key, \-- sva\_\...*\
*studio_id text not null references studio(studio_id) on delete
cascade,*\
*action text not null check (action in
(\'submitted\',\'approved\',\'rejected\',\'revoked\')),*\
*actor_user_id text not null, \-- admin*\
*reason text,*\
*created_at timestamptz not null default now()*\
*);*\

**Indices**

- *studio(city, is_published)* for city listing.
- *studio(owner_user_id, updated_at desc)* for owner dashboards.
- Partial index: *studio(is_published and verified_studio)* for search
  gating.

## **1.11.C Amenity taxonomy (canonical keys)**

Start with a small, expressive set (expandable in Admin):

- **Lighting**: *natural_light*, *north_light*, *blackout*,
  *strobe_included*
- **Backdrops**: *paper_seamless*, *cyc_wall*, *green_screen*
- **Facilities**: *makeup_area*, *dressing_room*, *restroom*,
  *kitchenette*
- **